class Demo{constructor(e,t){this.options=Object.assign({prefix:"demo",theme:"light",name:"demo",ajax:!0,scroll:!0,api:"",ajaxCookie:!1,debugger:!1,log:!0,plugins:[],ajaxTimeout:8e3,ajaxUploadTimeout:2e4},e||{}),this.const("version","1.0.80"),this.$={dom:e=>e?document.querySelector(e):null,all(e){if(!e)return[];let t=document.querySelectorAll(e);return t.length>0?Array.from(t):[]},id:e=>e?document.getElementById(e):null,name(e){if(!e)return[];var t=document.getElementsByName(e);return t.length>0?Array.from(t):[]},tag(e){if(!e)return[];var t=document.getElementsByTagName(e);return t.length>0?Array.from(t):[]}},this._init(e=>{t&&t(e)})}js(e,t=1){var n=e,o=this;return t&&(n=this.$.dom(e)),n?{dom:function(){return n},html:function(e){if(!arguments.length)return n.innerHTML;let t=o._is_obj(e).code;4!==t&&6!==t||(e=JSON.stringify(e)),n.innerHTML=e},text:function(e){if(!arguments.length)return n.innerText;n.innerText=e},brother:function(e=""){return e?n.parentNode.querySelector(e):n},addClass:function(e){if(4===o._is_obj(e).code)return e.forEach(e=>{n.classList.add(e)}),1;n.classList.add(e)},removeClass:function(e){var t=n.className;if(4===o._is_obj(e).code)return e.forEach(o=>{t.indexOf(o)>=0&&n.classList.remove(e)}),1;t.indexOf(e)>=0&&n.classList.remove(e)},toggleClass:function(e){var t=function(t){n.className.indexOf(t)>=0?n.classList.remove(e):n.classList.add(e)};if(4===o._is_obj(e).code)return e.forEach(e=>{t(e)}),1;t(e)},append:function(e){if(!e)return 0;n.innerHTML+=e},appendChild:function(e){if(!e)return 0;n.appendChild(e)},remove:function(){n.parentNode.removeChild(n)},style:function(e,t){var i="";if(6===o._is_obj(e).code)for(var r in e)i+=`${r}:${e[r]};`,t&&(n.style[r]=e[r]);else t=!1,i=e;t||n.setAttribute("style",i)},attr:function(e,t){if(6===o._is_obj(e).code)return Object.keys(e).forEach(t=>{n.setAttribute("data-"+t,e[t])}),!0;if(4==o._is_obj(e).code){let t={};return e.forEach(e=>{t[e]=n.getAttribute("data-"+e)||""}),t}if(!(arguments.length>1))return n.getAttribute(e);n.setAttribute(e,t)},click:function(e,t){arguments.length>0?n.onclick=function(n){let i=this;t>0&&!isNaN(t)&&(i.setAttribute("disabled","true"),setTimeout(()=>{i.removeAttribute("disabled")},1e3*t)),o.focus(i),e(i,n),n.preventDefault(),o.stopBubble(n)}:n.click()},json:function(e){e=e||{},n.innerHTML=o.showJson(e)},width:function(e){if(!arguments.length)return n.clientWidth;n.style.width=isNaN(e)?e:e+"px"},height:function(e){if(!arguments.length)return n.clientHeight;n.style.height=isNaN(e)?e:e+"px"},square:function(e,t){if(!e)return{w:n.clientWidth,h:n.clientHeight};t||(t=e),o.js(n,0).width(e),o.js(n,0).height(t)},val:function(e){if(!arguments.length)return n.value;n.value=e},input:function(e){arguments.length&&(n.oninput=function(t){e(this,t)})},keydown:function(e){arguments.length&&(n.onkeydown=function(t){t=t||window.event;var o={event:t,code:t.keyCode,value:this.value,key:t.key,dom:n};e(o,this)})},find:function(e){var t=function(e){var t=[];return e.forEach(function(e){t.push({name:e.replace(/[.|#]/,""),dom:Array.from(n.querySelectorAll(e))})}),t};return 4===o._is_obj(e).code?t(e):arguments.length>1?t([e])[0].dom:n.querySelector(e)},video:function(e){for(var t in e=Object.assign({"x5-video-player-type":"h5","x5-video-player-fullscreen":"false"},e||{}),e)n.setAttribute(t,e[t])},index:function(){let e=0;do{e++}while(n=n.previousElementSibling);return e},offset:function(){let e=n.getBoundingClientRect(),t=document.body;return{top:e.top+t.scrollTop,left:e.left+t.scrollLeft,self:{top:e.top,left:e.left}}},replaceVal:function(e){e=e||/[^\u4e00-\u9fa5]/g;var t=t=>{let n=t.value;t.value=n.replace(new RegExp(e),"")};n.onfocus=(e=>{t(e.target)}),n.onkeyup=(e=>{t(e.target)}),n.onblur=(e=>{t(e.target)})},child:function(e){return Array.from(e?n.querySelectorAll(e):n.children)},bgc:function(e){let t=o.js(n,0).child("[data-background-list]");return t.length&&(e=e||"green|#18bc9c",t.forEach(t=>{let n=t.getAttribute("data-bgc")||e;n=n.split("|"),1===n.length&&(n[1]=n[0]),t.style.background=o.algorithm().gradients(1*(n[2]||90),n[0],n[1]||"")})),t},show:function(){let e=n.getAttribute("data-fade")||"hide";if("hide"===e){var t=0;n.style.display="",n.setAttribute("data-fade","show");var o=()=>{n.style.opacity=t>1?1:t,t+=Math.random()/10,t<1.001&&setTimeout(()=>{o()},50)};o()}return n},hide:function(){let e=n.getAttribute("data-fade")||"show";if("show"===e){var t=1,o=()=>{n.style.opacity=t<0?0:t,t-=Math.random()/10,t>-.001?setTimeout(()=>{o()},50):(n.style.display="none",n.setAttribute("data-fade","hide"))};o()}return n},toggle:function(){let e=n.getAttribute("data-fade")||"";return o.js(n,0)["show"===e?"hide":"show"]()},file:function(e,t){t=t||{};let i="file-"+o.rand(1e4,99999),r=demo._div("input","m_inp"),a=demo._div("label"),s=n.innerText;r.setAttribute("type","file"),r.setAttribute("id",i),t.more&&r.setAttribute("multiple",!0);let l="";switch(t.type){case"txt":l="text/plain";break;case"other":l=t.accept||"";break;default:l="image/png,image/gif,image/jpg,image/jpeg"}r.setAttribute("accept",l),a.setAttribute("for",i),a.setAttribute("style","display:block"),n.innerHTML="",n.appendChild(r),n.appendChild(a),a.innerHTML=s||"Upload",o.$.id(i)&&(o.$.id(i).onchange=function(){let t={files:this.files,file:this.files[0],time:o.timeout(),id:i,el:n};t.file&&e&&e(t)})},scrollbar:function(){n.clientHeight>n.parentNode.clientHeight&&n.parentNode.classList.add(o.options.prefix+"_scrollbar")}}:{}}loading(e){var t=Object.assign({theme:this.options.theme,dom:"body"},e||{}),n=this,o=n.options.prefix+"_loading",i=n.$.dom("."+o);if(i&&"body"===t.dom)return i.className=o+(""===t.theme?"":" "+t.theme),!1;var r=document.createElement("div");return r.setAttribute("class",o+(""===t.theme?"":" "+t.theme)),t.id&&r.setAttribute("id",n.options.prefix+"-"+t.id),"body"===t.dom?document.body.appendChild(r):(r.setAttribute("style","position:absolute"),n.$.dom(t.dom).appendChild(r)),r}alert(e,t,n,o){var i=Object.assign({title:"",timeout:2e3,screen:0,sty:"alert",btnSuccessText:"确定",btnErrorText:"取消",btnSuccessStyle:"",btnErrorStyle:""},n||{});t=t||0;var r=this,a=null,s=arguments.length>3;i.screen&&(a=r.loading({theme:r.options.theme+" model",id:"loading-"+r.rand(1e3,9999)}));var l=function(e,t){var n=arguments.length;e&&(e.classList.add("hidden"),setTimeout(function(){e&&(r.remove(e),e=null),a&&(r.remove(a),a=null),n>1&&t(),s&&o({code:1,type:"all",status:"remove",options:i.data||{}})},200))};if(t>99){var c=r.js("body").find("[id^='"+r.options.prefix+"-alert-']"),u=r.js("body").find('[id^="'+r.options.prefix+'-loading-"]');return c&&(u&&(a=u),l(c)),u=null,c=null,0}var d=r.options.prefix+"_model."+i.sty,f=r.$.dom("."+d);if(f)return l(f,function(){f=null,r.alert(e,t,n)}),!1;var h=document.createElement("div"),m=["error","success","warning","default"];t=t>=m.length?m.length-1:t,h.setAttribute("class",d.replace("."," ")+" hidden "+m[t]),h.setAttribute("id",r.options.prefix+"-alert-"+r.rand(1e3,9999)),"object"===r._is_obj(e).type&&(e=JSON.stringify(e));var p="",g="_"+r.rand(1e3,9999)+"-";i.title&&(p+='<h3 class="title">'+i.title+"</h3>"),p+='<i class="close"></i>',p+='<p class="msg">'+(void 0===e?"":e)+"</p>","alert"!==i.sty&&(p+='<div class="btn">',p+='<button class="m_btn '+i.btnSuccessStyle+'" id="'+g+'s">'+i.btnSuccessText+"</button>",p+='<button class="m_btn '+i.btnErrorStyle+'" id="'+g+'e">'+i.btnErrorText+"</button>",p+="</div>"),h.innerHTML=p,document.body.appendChild(h);var b=h.querySelector(".close"),v=h.querySelector("#"+g+"s"),y=h.querySelector("#"+g+"e");"alert"===i.sty&&s&&o({code:1,type:"alert",status:"create",options:i.data||{}}),b&&(b.onclick=function(e){l(h),r.stopBubble(e)}),s&&(o({code:3e3,box:h}),v&&r.js(v,0).click(function(){o({btn:"success",t:v,code:1,box:h,options:i.data||{}}),l(h)}),y&&r.js(y,0).click(function(){o({btn:"error",t:y,code:0,box:h,options:i.data||{}}),l(h)})),setTimeout(function(){h.classList.remove("hidden")},50),i.timeout>500&&r._timers("alert_timer",function(e){e&&l(h)},0,i.timeout)}rand(e,t){return e*=1,1===arguments.length?(e=e>9?9:e<1?1:e,t=1*("1e"+e)-1,e=1*("1e"+(e-1)),Math.floor(Math.random()*(t-e+1)+e)):!t&&arguments.length>1?Math.floor(Math.random()*e):(t*=1,Math.floor(Math.random()*(t-e+1)+e))}remove(e){return e&&e.parentNode&&(e.parentNode.removeChild(e),e=null),1}timeout(e,t,n){function o(e){return"星期"+["日","一","二","三","四","五","六"][e]}function i(e){return e<10?"0"+e:e}function r(e,t,n){return n?e.y+t+e.m:e.y+t+e.m+t+e.d}function a(e,t,n){return n?e.h+t+e.i:e.h+t+e.i+t+e.s}function s(e,t){return e.m+t+e.d}e&&!isNaN(e)||(e=Date.now()),e=parseInt(e),n=n||"/",(e+"").length>10&&(e=Math.floor(e/1e3));var l=new Date(1e3*e),c=l.getDay(),u={y:l.getFullYear(),m:l.getMonth()+1,d:l.getDate(),h:l.getHours(),i:l.getMinutes(),s:l.getSeconds(),ms:l.getMilliseconds(),default:e,w:o(c),week:c};c=null,l=null,e=null,u.m=i(u.m),u.d=i(u.d),u.h=i(u.h),u.i=i(u.i),u.s=i(u.s);var d="";switch(t){case"alls":d=r(u,n)+" "+a(u,":");break;case"ymd":d=r(u,n);break;case"md":d=s(u,n);break;case"his":d=a(u,n);break;case"array":d=[u.y,u.m,u.d,u.h,u.i,u.s,u.ms];break;case"object":d=u;break;case"zero":d=new Date(r(u,"/")+" 00:00:00").getTime();break;case"day":d=u.week;break;case"rotate":d={s:6*u.s,i:6*(u.i+u.s/60),h:30*(u.h%12+u.i/60)};break;default:d=r(u,n)+" "+a(u,":",1)}return d}local(){return this._storage("localStorage")}session(){return this._storage("sessionStorage")}getUrl(e){if(void 0===e)var t=decodeURI(location.search);else t="?"+e.split("?")[1];var n=new Object;if(-1!=t.indexOf("?"))for(var o=t.substr(1),i=o.split("&"),r=0;r<i.length;r++)n[i[r].split("=")[0]]=decodeURI(i[r].split("=")[1]||"");return n}getUrlParam(e,t){var n=window.location.search.substring(1);arguments.length>1&&(n=t.split("?")[1]);for(var o=decodeURI(n),i=o.split("&"),r=0;r<i.length;r++){var a=i[r].split("=");if(a[0]==e)return a[1]}return null}scroll(e,t){if(!this.$scroll)return!1;var n=new this.$scroll(e,Object.assign({scrollX:!1,scrollY:!0,bounce:!0,click:!0,mouseWheel:!0,probeType:1,scrollbar:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|DIV|P)$/}},t||{}));return n}click(e,t){let n=this;if(3===n._is_obj(e).code&&(e=n.js(e).dom()),!(arguments.length>1))return e.click();if(e.length>=1)for(var o=0;o<e.length;o++){let i="data-tab-click-index";e[o].setAttribute(i,o),e[o].onclick=function(e){n.focus(this),t({index:1*this.getAttribute(i),e:e,dom:this}),n.stopBubble(e)}}else e.onclick=function(e){n.focus(this),t({index:0,e:e,dom:this}),n.stopBubble(e)}}class(e){3===this._is_obj(e).code&&(e=this.js(e).dom());var t=[];if(e.length>=1)for(var n=0;n<e.length;n++)t.push(e[n]);else t=[e];return{add(e){if(""===e||!e)return!1;t.forEach(function(t){t&&t.className.indexOf(e)<0&&t.classList.add(e)})},remove(e){if(""===e||!e)return!1;t.forEach(function(t){t&&t.className.indexOf(e)>=0&&t.classList.remove(e)})},name(e){t.forEach(function(t){t&&(t.className=e||"")})}}}ajax(e){var t=this;if(!window.Promise)return{};let n=e=>{let n="";return 6===t._is_obj(e).code?(Object.keys(e).forEach(t=>{n+=t+"="+e[t]+"&"}),n=n.substr(0,n.length-1)):n=e,n};e=e||"";let o=(n,o,i,r)=>t.copy(Object.assign({url:t.options.api+e,method:n,timeout:o||t.options.ajaxTimeout,headers:i,withCredentials:t.options.ajaxCookie},r));return{get(e,n,i,r){var a=t.copy(r||{});"json"===i&&(a["Content-Type"]="application/json"),6===t._is_obj(i).code&&(a=i);var s=arguments.length>1;t.$axios(o("get","",a,{params:e})).then(function(e){200===e.status&&s&&n(e.data)}).catch(function(e){s&&(e.response?n({code:0,data:e.response,err:e.response.data}):n({code:0,data:e,err:e.message}))})},post(e,n,i="",r){var a=arguments.length>1,s=t.copy(r||{});if("json"===i)s["Content-Type"]="application/json";else if("object"==typeof e){var l="";for(var c in e)l+=c+"="+e[c]+"&";e=l.substring(0,l.length-1)}6===t._is_obj(i).code&&(s=i),t.$axios(o("post","",s,{data:e})).then(function(e){200===e.status&&a&&n(e.data)}).catch(function(e){a&&(e.response?n({code:0,data:e.response,err:e.response.data}):n({code:0,data:e,err:e.message}))})},upload(n,o,i){var r=arguments.length>1,a=new FormData;if(6===t._is_obj(n).code)for(let e in n)a.append(e,n[e]);else a=n;var s=t.copy(Object.assign({"Content-Type":"multipart/form-data;boundary="+Date.now()},i||{}));t.$axios({url:t.options.api+e,method:"post",timeout:t.options.ajaxUploadTimeout,headers:s,withCredentials:t.options.ajaxCookie,data:a,onUploadProgress:function(e){var t=parseInt(e.loaded/e.total*100)/100;o({code:2,type:"progress",progress:t})}}).then(function(e){200===e.status&&r&&o(e.data)}).catch(function(e){r&&(e.response?o({code:0,data:e.response,err:e.response.data}):o({code:0,data:e,err:e.message}))})},other(e,n,i,r,a){var s=t.copy(a||{});if("json"===r)s["Content-Type"]="application/json";else if("object"==typeof n){var l="";for(var c in n)l+=c+"="+n[c]+"&";n=l.substring(0,l.length-1)}6===t._is_obj(r).code&&(s=r);var u=arguments.length>1;t.$axios(o(e||"post","",s,{data:n})).then(function(e){200===e.status&&u&&i(e.data)}).catch(function(e){u&&(e.response?i({code:0,data:e.response,err:e.response.data}):i({code:0,data:e,err:e.message}))})},plain(o,i,r){let a=n(o),s=((r?"":t.options.api)+e).split("?")[0]+(a?"?"+a:"");var l=new XMLHttpRequest;l.open("GET",s,!0),l.onreadystatechange=function(){(4==l.readyState&&200==l.status||304==l.status)&&i.call(this,l.responseText)},l.send()},cipher(o,i,r){var a=new XMLHttpRequest;a.open("POST",(r?"":t.options.api)+e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4!=a.readyState||200!=a.status&&304!=a.status||i.call(this,a.responseText)},a.send(n(o))}}}jsonp(e,t,n){function o(){return(Math.floor(1e5*Math.random())*Date.now()).toString(16)}function i(e,t){e=e.replace(/=/g,"");var n=[];switch(t.constructor){case String:case Number:case Boolean:n.push(encodeURIComponent(e)+"="+encodeURIComponent(t));break;case Array:t.forEach(function(t){n=n.concat(i(e+"[]=",t))});break;case Object:Object.keys(t).forEach(function(o){var r=t[o];n=n.concat(i(e+"["+o+"]",r))})}return n}function r(e){var t=[];return e.forEach(function(e){"string"==typeof e?t.push(e):t=t.concat(r(e))}),t}return t=t||{},n=n||this.jsonp_timeout,new Promise(function(a,s){function l(e){c(),clearTimeout(m),s({status:400,statusText:"Bad Request"})}function c(){g.removeEventListener("error",l)}if("string"!=typeof e)throw new Error('[jsonp] Type of param "url" is not string.');var u=t.callbackQuery||"callback",d=t.callbackName||"jsonp_"+o();t[u]=d,delete t.callbackQuery,delete t.callbackName;var f=[];Object.keys(t).forEach(function(e){f=f.concat(i(e,t[e]))});var h=r(f).join("&"),m=null;"number"==typeof n&&(m=setTimeout(function(){c(),p.removeChild(g),delete window[d],s({statusText:"Request Timeout",status:408})},n)),window[d]=function(e){clearTimeout(m),c(),p.removeChild(g),a(e),delete window[d]};var p=document.querySelector("head"),g=document.createElement("script");g.addEventListener("error",l),g.src=e+(/\?/.test(e)?"&":"?")+h,p.appendChild(g)})}platform(){var e=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(e){var t=window.navigator.userAgent,n=(window.navigator.appVersion,t.indexOf("Android")>-1||t.indexOf("Linux")>-1),o=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(n)return 1;if(o)return 2}var i=document.body.clientWidth;return i<750?1:0}touch(e,t){function n(n){if(n.preventDefault(),"touchstart"==n.type){var f=n.touches[0];o=Math.floor(f.pageX),i=Math.floor(f.pageY)}else if("touchmove"==n.type){f=n.touches[0];Math.floor(f.pageX),Math.floor(f.pageY)}else if("touchend"==n.type||"touchcancel"==n.type){r=Math.floor(n.changedTouches[0].pageX),a=Math.floor(n.changedTouches[0].pageY),s=r-o,l=a-i,c=180*Math.atan2(l,s)/Math.PI;var h={};Math.abs(s)<=1||Math.abs(l)<=1?h={code:0,text:"点击",dire:"click"}:c<45&&c>=-45?h={code:2,text:"右",dire:"right"}:c<135&&c>=45?h={code:3,text:"下",dire:"down"}:c<=180&&c>=135||c>=-180&&c<-135?h={code:4,text:"左",dire:"left"}:c<=-45&&c>=-135&&(h={code:1,text:"上",dire:"up"}),u=Object.assign(u,h),u.target=e,d>0&&t(u)}}"string"==typeof e&&(e=this.$.dom(e));var o,i,r,a,s,l,c,u={view:["pc","android","iphone"][this.$web],code:-1},d=arguments.length;if(!e||!this.$web)return d>1&&t(u),!1;e.addEventListener("touchstart",n,!1),e.addEventListener("touchmove",n,!1),e.addEventListener("touchend",n,!1)}showJson(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),e=e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="#ff9b26";return/^"/.test(e)?t=/:$/.test(e)?"#ff4c2f":"#67e66e":/true|false/.test(e)?t="#414fff":/null/.test(e)&&(t="#999"),'<span style="color:'+t+'">'+e+"</span>"})}resize(e,t,n){e=this.$.dom(e)||document.body;var o=arguments.length>1,i={w:e.clientWidth,h:e.clientHeight},r=this;e.onresize=function(){r._timers("resize_timer",function(n){if(n){var r={w:e.clientWidth,h:e.clientHeight};r.h!==i.h&&r.w!==i.w?r.dire="auto":r.w!==i.w?r.dire="width":r.dire="height",o&&t(r)}},0,n||800)}}eval(e,t){if(!t){let t="(function(){"+e+"})()";return this.fn(t)}var n=document.createElement("script");n.type="text/javascript",n.text=e,document.getElementsByTagName("head")[0].appendChild(n),document.head.removeChild(document.head.lastChild),n=null}fn(e){let t=new Function("return "+e)();return t}frame(e,t){function n(){l=null,c=null,r=null,u=null,d=null,f=null,h=null}e=Object.assign({dom:"body",type:"frame",theme:"shadow_right",title:"Title",header:!0,close:!0,scroll:!1,style:{},move:!1,moveDom:"",id:"frame-"+this.rand(1e3,9999)},e);var o=arguments.length>1,i=(e,t,n)=>({err:e,by:t,code:n||0}),r=i("dom is null","frame-dom"),a=this.$.dom(e.dom);if(!a)return o&&t(r),r;e.theme=e.theme?e.theme+(e.header?"":" auto"):e.header?"":"auto",e.style["z-index"]||(e.style["z-index"]=Math.ceil((Date.now()-new Date(this.timeout("","y/m/d")).getTime())/1e3));var s="";switch(s+=`<div class="${this.options.prefix}_frame${e.theme?" "+e.theme:""} hidden" data-frame id="${e.id}">`,e.header?(s+=`<header class="frame_header"><b>${e.title}</b>`,e.close&&(s+='<span class="close" data-frame-close>X</span>'),s+="</header>"):e.close&&(s+='<span class="close" data-frame-close>X</span>'),s+=`<div class="frame_main" id="${e.id}-main">`,e.type){case"frame":s+=`<iframe src="${e.src}" frameborder="0"></iframe>`;break;case"template":s+=`<div class="content" data-frame-content>${e.template}</div>`;break;default:s+='<div class="content" data-frame-content></div>'}if(s+="</div>",e.foot&&(s+=`<div class="frame_foot" id="${e.id}-foot"></div>`),s+="</div>","frame"===e.type&&!e.src)return r=i("frame src is null","frame-src"),o&&t(r),r;if("template"===e.type&&!e.template)return r=i("frame template is null","frame-template"),o&&t(r),r;a.innerHTML=s,s=null,r=i("frame create end","frame-create",1),o&&t(r);var l=a.querySelector("[data-frame]"),c=a.querySelector("[data-frame-close]"),u=a.querySelector("[data-frame-content]"),d=null,f=null,h=null;if(e.foot&&(f=a.querySelector(".frame_foot"),u.style["padding-bottom"]=f.clientHeight+"px"),e.header&&(h=a.querySelector(".frame_header")),e.style){var m="";for(var p in e.style)p&&(m+=`${p}:${e.style[p]};`);m&&l.setAttribute("style",m)}var g=this;if(l)return c&&(c.onclick=function(e){l.classList.add("hidden"),setTimeout(function(){g.remove(l),r=i("frame is delete","frame-delete",1),o&&t(r),n()},1e3),g.stopBubble(e)}),e.scroll&&u&&(d=g.scroll("#"+e.id+"-main"),r=i("frame scroll is create success","frame-scroll",1),o&&t(r)),e.move&&g.move(l,function(t){t.code?g.js(l,0).style(Object.assign({left:t.left,top:t.top,margin:"0",bottom:"auto",right:"auto",transition:"all 0s"},e.style)):l.style.transition="all .8s"},e.moveDom),r=i("frame all success","frame-all-"+e.type,1),r.dom=l,r.doms={scroll:d,close:c,content:u,header:h,footer:f,main:g.$.id(e.id+"-main")},o&&t(r),setTimeout(function(){l.classList.remove("hidden")},50),r;r=i("frame dom is null","frame-dom-null"),o&&t(r),n()}location(e,t,n){function o(){if(!window.open)return a.alert("window.open is null"),0;let t=null;try{t=window.open("_blank"),t.location=e}catch(e){a.alert("浏览器禁用 window.open")}return t}function i(){return e===window.location.href?(window.location.reload(),!1):"open"===t.target?(o(e),!1):(window.location.href=e,!0)}var r=arguments.length>2;let a=this;if(!e)return!1;if(t=Object.assign({time:0,target:""},t),t.time<1)i();else if(r)var s=1*t.time,l=setInterval(function(){if(s<=0)return clearInterval(l),l=null,i(),!1;r&&n(s),s--},1e3)}tree(e,t,n){t=t||"id",n=n||"by";var o=[];if(!Array.isArray(e))return o;e.forEach(function(e){delete e.children});var i={};return e.forEach(function(e){i[e[t]]=e}),e.forEach(function(e){var t=i[e[n]];t?(t.children||(t.children=[])).push(e):o.push(e)}),o}focus(e){return 3===this._is_obj(e).code&&(e=this.$.dom(e)),e.blur?e.blur():this.$.dom("body").focus(),e}script(e,t,n){if(!e)return!1;var o=document.createElement("script");o.type="text/javascript",arguments.length>2?o.text=n:(o.async=!0,o.src=e),arguments.length>1&&(o.onload=t);var i=document.getElementsByTagName("script")[0];return i.parentNode.insertBefore(o,i),o=null,i=null,!0}hover(e,t,n){var o=arguments.length>1,i=arguments.length>2;if(3===this._is_obj(e).code&&(e=this.$.all(e)),!o)return e;if(e.length>=1)for(var r=0;r<e.length;r++)e[r].setAttribute("data-tab",r),e[r].onmouseenter=function(e){t({index:1*this.getAttribute("data-tab"),e:e,dom:this,type:"enter"})},e[r].onmousemove=function(e){t({index:1*this.getAttribute("data-tab"),e:e,dom:this,type:"move"})},i&&(e[r].onmouseleave=function(e){n({index:1*this.getAttribute("data-tab"),e:e,dom:this,type:"leave"})});else e.onmouseenter=function(e){t({index:0,e:e,dom:this})},i&&(e.onmouseleave=function(e){n({index:0,e:e,dom:this})})}tab(e,t,n){t=Object.assign({index:0,event:"click",list:"[data-tab-list]",nav:"[data-tab]"},t);var o=this;3===o._is_obj(e).code&&(e=o.$.dom(e));var i=Array.from(e.querySelectorAll(t.nav));i.length&&(o.class(i).name(""),i.forEach(function(e,t){e&&!o.js(e,0).attr("data-index")&&o.js(e,0).attr("data-index",t)}),"hover"===t.event&&o.hover(i,function(e){"enter"===e.type&&e.dom.click()}),o.click(i,function(e){var r=e.dom,a=o.js(r,0).attr("data-index");if(void 0===a&&(a=t.index),o.class(i).name(""),o.js(r,0).addClass("active"),o.focus(r),n&&n({index:1*a,that:r}),t.list){var s=o.$.all(t.list);s&&s.length&&(o.class(s).name(""),o.js(s[1*a],0).addClass("show"))}return""}),setTimeout(()=>{t.index<i.length&&i[1*t.index].click()},200))}move(e,t,n){if(n&&3===this._is_obj(n).code&&(n=this.$.dom(n)),3===this._is_obj(e).code&&(e=this.$.dom(e)),!e)return null;var o=n?n.clientWidth:window.innerWidth,i=n?n.clientHeight:window.innerHeight;e.onmousedown=function(n){var r=n||window.event,a=r.clientX-e.offsetLeft,s=r.clientY-e.offsetTop;void 0!==e.setCapture&&e.setCapture();var l=0,c=0;document.onmousemove=function(n){var r=n||window.event,u=r.clientX-a,d=r.clientY-s;u=u>o-e.offsetWidth?o-e.offsetWidth:u<0?0:u,d=d>i-e.offsetHeight?i-e.offsetHeight:d<0?0:d,l=u,c=d,t&&t({left:u+"px",top:d+"px",code:1})},document.onmouseup=function(){this.onmousemove=null,this.onmouseup=null,void 0!==e.releaseCapture&&e.releaseCapture(),t&&t({left:l,top:c,code:0}),l=null,c=null}}}array(e){var t=this;return e.length&&4===t._is_obj(e).code?{rand:function(){var n=t.copy(e);return n.sort(function(){return Math.random()-.5})},agg:function(t){var n={};return t?(e.forEach(function(e){var o=e[t];void 0!==o&&""!==o&&(n[o]?n[o].push(e):n[o]=[e])}),n):n},unique:function(t){if(arguments.length){var n=new Map;return e.filter(function(e){return!n.has(e[t])&&n.set(e[t],1)})}for(var o=[],i=0;i<e.length;i++)-1===o.indexOf(e[i])&&o.push(e[i]);return o},max:function(){return Math.max.apply(null,e)},min:function(){return Math.min.apply(null,e)},sort:function(t){return{reverse:function(){return t?e.sort(function(e,n){return n[t].localeCompare(e[t])}):e.sort(function(e,t){return e-t})},sort:function(){return t?e.sort(function(e,n){return e[t].localeCompare(n[t])}):e.sort(function(e,t){return t-e})}}},sum:function(t,n){return t=t||0,n=n||0,e.reduce(function(e,t){e+="",t+="";var o="0";e.indexOf(".")>=0&&(o=e),t.indexOf(".")>=0&&(o=t),e.indexOf(".")>=0&&t.indexOf(".")>=0&&(o=e.length>t.length?e:t);var i=0;o.indexOf(".")>=0&&(i=o.length-o.indexOf(".")-1,i=1*("1e"+i),e*=i,t*=i),e*=1,t*=1,i=i<1?1:i;var r=(e+t)/i;switch(n){case 1:r=(e-t)/i;break;case 2:r=e*t/i;break;case 3:r=e/t;break;case 4:r=e/i%(t/i)}return o=null,i=null,r})+1*t},chunk:function(t,n){t=t||1,n=n||[];let o=e;if(t<=0)return n;for(;o.length;)n.push(o.splice(0,t));return n},obj:function(t,n){let o={};return e.forEach(e=>{void 0!==e[t]&&(o[e[t]]=e[n])}),o}}:{}}copy(e){return""===e||null==e||NaN===e?"":JSON.parse(JSON.stringify(e))}font(e,t){e=e||1920;let n=window.innerWidth*(100/e);t&&(n=t),document.documentElement.style.fontSize=n+"px",this.font_em=!0}cssLazy(e){e=e||"css-lazy";var t=document.head.children,n=!1;if(t.length)for(var o=0;o<t.length;o++)t[o].id===e&&(n=!0);return{link:function(t){if(!t)return 0;if(!n){var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("id",e),o.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(o),o=null}},text:function(t){if(!t)return 0;if(!n){var o=document.createElement("style");o.setAttribute("type","text/css"),o.setAttribute("id",e);try{o.appendChild(document.createTextNode(t))}catch(e){style.styleSheet.cssText=t}document.getElementsByTagName("head")[0].appendChild(o),o=null}}}}hash(e,t,n){function o(){if(i.is_hash)return 0;var o=setTimeout(()=>{clearTimeout(o),o=null,i.hash(t=>{e(t)},t,n)},200)}t=0===t?0:t||"",n=n||"";let i=this,r=window.location.hash;if(n)try{r=i.eval("return "+n)}catch(t){n="",r="",e({code:0,data:t+""})}r!=t&&(t=r,e({code:1,data:t})),o()}refresh(e){let t=this;t.loading_timer=null,t.alert_timer=null,t.resize_timer=null,t.timer_timer=null,t.jsonp_timer=null,t.down_timer=null,t.toast_timer=null,t.jsonp_timeout=8e3,t.is_hash=!1,t.is_cache=0;let n=t.$config.select("api");return n&&(t.options.api=n),t.options.scroll&&window.BScroll&&(t.$scroll=window.BScroll),t.options.ajax&&window.axios&&(t.$axios=window.axios),console.log("%c 欢迎使用！当前版本：%c"+t.version+"。%c 更新时间："+t.__TIME__,"color:tomato","color:green","color:orange"),t.options.debugger&&(console.log("%c 禁止调试！","color:orange"),setInterval(function(){var e=Date.now();return e},100)),e||console.log("%c 重置成功","color:#99cc33"),{option:t.options,scroll:t.$scroll||"",ajax:t.$axios||"",ver:t.version}}route(){function e(e,t,n,o){return{path:e,title:n||"",id:t||1,by:o||-1}}function t(e){r.js("title").html(e)}function n(e,n){let o=r.$routeConfig.now;o.path?(window.location.hash=o.path,t(o.title),i(t=>{e&&e(t)})):n&&n()}function o(e){if(e<=0)return{};let t=r.$routeConfig.path.filter(t=>t.id===e);return t.length?t[0]:{}}function i(e){let t=r.$routeConfig.now,n={lazy:t.path.replace(/\//g,"_"),params:t.params.join("&"),path:t.path,back:{},id:t.id,title:t.title,code:1};n.back=o(n.by),n.params=r.getUrl("?"+n.params);let i=r.$.all('script[src*="'+r.$routeConfig.prefix+'"]');if(i.length)for(let e=0;e<i.length;e++)r.remove(i[e]);r.script(r.$routeConfig.prefix+n.lazy+r.$routeConfig.suffix),r.$routeConfig.now=n,e(n),n=null}let r=this;return{create:function(e,t,n){if(4===r._is_obj(e).code&&e.length>0){let n=e.filter(e=>""!==e.path);return r.$routeConfig.path=r.array(n).unique("path"),r.$route.config(),t&&t(),1}return n&&n(),0},init:function(e){n(t=>{e&&e(t)},()=>{r.$route.push(window.location.hash||"/")})},push:function(e,n){let o=e.substr(1);o=o||"index",o=o.split("/");let a=o.filter(e=>e.indexOf("=")<0&&e).join("/"),s=r.$routeConfig.path.filter(e=>e.path===a);if(!s.length)return s=null,n?n({code:0,err:"错误路由"}):demo.alert("错误路由"),0;s=s[0],window.location.hash=s.path,t(s.title);let l=[];o=o.join("/").replace(a,"").split("/"),o.length>1&&(l=o.splice(1)),s.params=l,r.$routeConfig.now=s,s=null,i(e=>{n&&n(e)})},back:function(e){let t=(r.$routeConfig.now||{}).back||{};r.$routeConfig.now=t,n(t=>{e&&e(t)},()=>{window.history.go(-1)}),t=null},array:function(t){if(4===r._is_obj(t).code&&t.length>0){let n=t.map(t=>e(t[0],t[1],t[2],t[3]));return n}return[]},title:function(e){t(e)},reset:function(e,t,n){r.$route.create(e||[]),r.$route.config(t||{}),n&&n()},destroy:function(){r.$routeConfig={path:[],now:{},prefix:"",suffix:""}},config:function(e){e=e||{},r.$routeConfig.prefix=e.prefix||"./lazy/",r.$routeConfig.suffix=e.suffix||".base.js?v="+Date.now()}}}lazy(){let e=this;return{page:function(t,n,o){3===e._is_obj(t).code&&(t=e.js(t).dom()),e.js(t,0).html(""),n=Object.assign({vue:!0,id:"lazy-"+Date.now(),class:"app_view",html:"html",style:"",link:"",suffix:".base.css?v="+Date.now(),prefix:""},n);var i=e._div("div",n.class);i.setAttribute("id",n.id),n.vue&&i.setAttribute("v-clock",""),i.innerHTML=n.html,n.style&&e.cssLazy("css-text-"+n.id).text(n.style),n.link&&(4===e._is_obj(n.link).code?n.link.length&&n.link.forEach((t,o)=>{e.cssLazy("css-link-"+n.id+"-"+o).link(n.prefix+t.replace(/\.css/,"")+n.suffix)}):e.cssLazy("css-link-"+n.id).link(n.prefix+n.link.replace(/\.css/,"")+n.suffix)),t.appendChild(i),o&&o()},image:function(t){t=t||"img";let n=e.$.all(t),o=n.length,i=document.documentElement.clientHeight,r=document.documentElement.scrollTop||document.body.scrollTop;for(let e=0;e<o;e++){let t=n[e].offsetTop;if(t<i+r){let t=n[e].dataset.src;n[e].src=t}}},scroll:function(e){let t=document.documentElement,n=t.clientHeight,o=t.scrollTop,i=t.scrollHeight;n+o>=i&&e&&e()},bulk:function(t,n,o,i,r,a,s){return r=r||"li",a=a||"",window.requestAnimationFrame&&document.createDocumentFragment?arguments.length<4||5!==e._is_obj(arguments[3]).code?"传入正确参数":void setTimeout(()=>{function l(){let t=document.createDocumentFragment();for(let n=0;n<d;n++){f++;let n=e._div(r,a),o=i(f,m,h);o&&(n.innerHTML=o,t.appendChild(n)),n.setAttribute("data-bulk-id",f)}p.appendChild(t),m+=1,c()}function c(){if(m<h){if(m+1===h){let e=u%d;d=e>0?e:d}window.requestAnimationFrame(l)}else s&&s(Array.from(p.querySelectorAll("[data-bulk-id]")))}let u=t||100,d=n||20,f=0,h=Math.ceil(u/d),m=0,p=o;3===e._is_obj(o).code&&(p=e.$.dom(o)),c()},0):"不支持"}}}debounce(e,t){let n=null;return function(){null!==n&&clearTimeout(n),n=setTimeout(()=>{e.apply(this,arguments)},t)}}throttle(e,t){let n=Date.now();return function(){let o=this,i=arguments,r=Date.now();r-n>=t&&(e.apply(o,i),n=Date.now())}}access(e,t,n){let o="接入成功";return this[e]?(o="该方法已存在",n&&n({c:!1,m:o}),o):(this[e]=t,n&&n({c:!0,m:o}),o)}ctrl(){let e=this,t="position: fixed;left: -100vw;top: -100vh;z-index: -1000";return{c:function(n,o){let i=o,r=document.execCommand("copy");if(!r)return e.alert("不支持"),0;if(n)try{3===e._is_obj(n).code&&(n=e.$.dom(n)),i=n.getAttribute("data-copy")||""}catch(e){i=""}let a=e._div("textarea"),s="copy-"+Date.now()+"-"+e.rand(6);return a.value=i||"copy",a.setAttribute("id",s),a.setAttribute("style",t),e.$.dom("body").appendChild(a),a.select(),document.execCommand("copy"),setTimeout(()=>{e.remove(a)},300),1},r:function(t,n,o){function i(){u&&(clearTimeout(u),u=null)}if(3===e._is_obj(t).code&&(t=e.$.dom(t)),n=Object.assign({item:[]},n),!n.item.length)return t.oncontextmenu=function(){return o&&o({type:"right"}),!1},1;let r=e._div("div",e.options.prefix+"_right"),a=n.item.length>6?"scroll":"";n.id=n.id||"right-menu-"+Date.now()+"-"+e.rand(6),r.setAttribute("id",n.id);let s='<i class="close fa fa-close"></i><i class="before fa fa-hand-o-up"></i><div class="tab '+a+'"><ul>';n.item.forEach((e,t)=>{s+='<li><span title="'+e.text+'" data-index="'+t+'">'+e.text+"</span></li>"}),s+="</ul></div>",r.innerHTML=s,e.$.dom("body").appendChild(r);let l="#"+n.id,c=null,u=null,d=n.timeout||3e3;d=d<100?100:d,a&&(c=e.scroll(l+" .tab",{})),e.click(l+" .close",()=>{i(),e.js(l).style({opacity:0})}),e.click(e.$.all(l+" .tab li span"),t=>{let i=t.dom.getAttribute("data-index"),r={data:e.copy(n.item[1*i]),type:"click",scroll:c,res:t,leave:d}
;r.data.callback&&delete r.data.callback,n.item[i].callback?n.item[i].callback(r):o&&o(r),e.click(l+" .close"),r=null}),t.oncontextmenu=function(t){return e.js(l).style({left:t.clientX+"px",top:t.clientY+"px"}),!1},e.$.dom(l).oncontextmenu=function(){return!1},e.hover(l,()=>{i()},()=>{i(),u=setTimeout(()=>{e.click(l+" .close")},d)})},d:function(t,n){let o=(3===e._is_obj(t).code?t.split(","):t)||[],i=[];o.length&&(i=o.map(e=>{let t=(e+"").split("-"),n={c:"c"===t[0],s:"s"===t[0]};return n.key=t[1]||t[0],n})),o.indexOf("right")>=0&&(document.oncontextmenu=function(){return!1}),document.onkeydown=function(e){let t=e.key.toLowerCase(),r=i.filter(n=>n.key.toLowerCase()===t&&e.ctrlKey===n.c&&e.shiftKey===n.s);if(o.indexOf("f12")>=0&&e.ctrlKey&&e.shiftKey&&"i"===t)return n&&n({key:"f12"}),!1;if(r.length){if(r=r[0],e.ctrlKey===r.c&&t===r.key&&!r.s)return n&&n(r),!1;if(e.shiftKey===r.s&&!r.cal&&t===r.key)return n&&n(r),!1}return!0}},k:function(n,o,i){3===e._is_obj(n).code&&(n=e.$.dom(n));let r="ctrl-k-input-keydown";var a=function(e,t,n){return{code:t,key:e,val:n}};e.js(n,0).click(n=>{e.$.id(r)&&e.js("#"+r).remove();let s=e._div("input","m_inp");s.setAttribute("id",r),s.setAttribute("style",t),s.setAttribute("autocomplete","off"),n.appendChild(s),s.focus();let l=[];s.onkeydown=function(e){let t={};if(!e.shiftKey&&!e.ctrlKey){let n=e.keyCode;switch(n){case 38:case 87:case 104:t=a("up",0,n);break;case 39:case 68:case 102:t=a("right",1,n);break;case 40:case 83:case 98:t=a("bottom",2,n);break;case 37:case 65:case 100:t=a("left",3,n);break;default:t=a(e.key,4,n)}}s.value="",i&&(t.event=e,l.push(t.key),t.his=l),o&&o(t),t=null}})}}}algorithm(){let e=this;return{rgb:function(t,n){return t=t||0,n=n||255,"rgb("+e.rand(t,n)+","+e.rand(t,n)+","+e.rand(t,n)+")"},rgba:function(t,n,o){return n=n||0,o=o||255,t=t||.1,"rgba("+e.rand(n,o)+","+e.rand(n,o)+","+e.rand(n,o)+","+t+")"},color:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)},gradients:function(...t){let n=t[0],o=t;return 1===e._is_obj(n).code?o=o.splice(1):n=0,o=o.filter(t=>3===e._is_obj(t).code&&""!==t),o.length<2&&(o=[e.algorithm().rgb(),e.algorithm().rgb()]),o=o.join(","),"linear-gradient("+n+"deg,"+o+")"}}}cookie(){let e=this,t=function(t){return e.options.prefix+"_"+t},n=function(e){return e?e.replace(t(""),""):""};return{set:function(n,o,i){i=i||"d7";let r=i.substr(0,1),a=i.substr(1);a=isNaN(a)?7:1*a;let s=1e3*("d"===r?86400:"h"===r?3600:1)*a,l=new Date;return l.setTime(l.getTime()+s),7!==e._is_obj(n).code&&7!==e._is_obj(o).code&&(document.cookie=t(n)+"="+escape(o)+";expires="+l.toGMTString()),r=null,a=null,s=null,l=null,!0},get:function(o,i){let r=e.cookie().getter(o);if(i)return r;let a=e._is_obj(r).code;return 6===a?r.key=n(r.key):4===a&&(r=r.filter(e=>0===e.key.indexOf(t(""))),r=r.map(e=>(e.key=n(e.key),e))),r},getter:function(n){let o=document.cookie||"";return o=o.split(";"),o.length?(o=o.map(e=>{let t=e.split("=");return{key:t[0].trim(),val:unescape(t[1])}}),o=o.filter(e=>""!==e.key),3===e._is_obj(n).code?(o=o.filter(e=>e.key===t(n)),o[0]||{}):o):[]},del:function(n){let o=new Date;o.setTime(o.getTime()-1);let i=e.cookie().getter(n).val;return null!=i&&(document.cookie=t(n)+"="+escape(i)+";expires="+o.toGMTString()),o=null,i=null,!0},clear:function(){let o=e.cookie().getter();return o.length&&(o=o.filter(e=>0===e.key.indexOf(t(""))),o.length&&o.forEach(t=>{e.cookie().del(n(t.key))})),o=null,!0}}}sizeof(e,t){var n,o,i,r=0;if(t=t?t.toLowerCase():"","utf-16"===t||"utf16"===t)for(o=0,i=e.length;o<i;o++)n=e.charCodeAt(o),r+=n<=65535?2:4;else for(o=0,i=e.length;o<i;o++)n=e.charCodeAt(o),r+=n<=127?1:n<=2047?2:n<=65535?3:4;return r}cache(){let e=this,t="cache_",n=5033164.8,o=["$session","$local"],i=function(n){return e.options.prefix+"_"+t+n},r=function(t){return e.sizeof(t)<n},a=function(t,n){e[o[e.is_cache]].set(t,n)},s=function(t){let n=e[o[e.is_cache]].get(i(t));return 7!==e._is_obj(n).code&&""!==n&&n};return{set:function(t,n){return n+="",r(n)&&3===e._is_obj(n).code?!1!==s(t)?0:(a(i(t),n),1):0},edit:function(t,n){return n+="",!1===s(t)?0:r(n)&&3===e._is_obj(n).code?(a(i(t),n),1):0},get:function(e){return s(e)},del:function(t){return!1===s(t)?0:(e[o[e.is_cache]].clear(i(t)),1)},name:function(e){return{key:i(e),val:s(e)}},cut:function(t){e.is_cache=1*!!t}}}log(e,t){if(!this.options.log)return e;switch(t){case 1:console.group(e);break;case 2:console.groupCollapsed(e);break;case 3:console.groupEnd();break;case 4:console.warn(e);break;case 5:console.error(e);break;case 6:e=Object.assign({text:"log",sty:"color:orange"},e||{}),console.log("%c "+e.text,e.sty),e=e.text;break;default:console.log(e)}return this}status(){let e=this,t=function(t){return(e.options.prefix+"status"+t).toUpperCase()},n=function(n){return e.$session.get(t(n))||{}},o=function(n,o){e.$session.set(t(n),o)},i=function(t,i,r){let a=n(t);return e._is_obj(r).code<7&&(a[i]=r,o(t,a)),a[i]||""},r=function(e,t){if(a[e])return 0;a[e]=function(n,o){return i(e,n,o)||t}},a={page:function(e,t){return i("page",e,t)||1},status:function(e,t){return i("status",e,t)||{}},code:function(e,t){return i("code",e,t)||400},add:function(e,t){r(e,t||"")}};return a}const(e,t){if(this[e])return!1;try{Object.defineProperty(this,e,{enumerable:!0,value:t,configurable:!1,writable:!1})}catch(e){console.log(e+"")}}plugIn(){let e=this,t=e.options.prefix+"_plugins",n=t=>{e.ajax(e.__DEMO_API__).plain({send:t,type:"plugins"},t=>{let n=JSON.parse(t);n.code&&n.data.forEach(t=>{if(e[t.name]&&e[t.name]())return 1;e.script(t.url,()=>{e.access(t.name,e.fn(t.fn),e=>{e.c&&o(t.name)}),e.js("script").remove()})})},!0)},o=n=>{let o=e.$config.select(t)||[];o.indexOf(n)<0&&o.push(n),e.$config.edit(t,o)};return{add:function(o,i,r){let a=e.$config.select(t)||[];4===e._is_obj(o).code?(n(o.join(",")),a=a.concat(o)):(n(o),a=a.concat(o.split(",")));let s=e.array(a).unique();e.$config.edit(t,s);let l=()=>{try{i&&i(s)}catch(e){r&&r(e+""),setTimeout(()=>{l()},500)}};l()},del:function(n){let o=e.$config.select(t)||[];4===e._is_obj(n).code?n.forEach(e=>{o=o.filter(t=>t!==e)}):o=o.filter(e=>e!==n),e.$config.edit(t,o)},init:function(){let o=e.options.plugins.concat(e.$config.select(t)||[]);e.$config.add(t,o),o.length&&n(o.join(","))}}}toast(e,t){let n=this,o=n.options.prefix+"_toast",i=n.$.dom("."+o),r=n._is_obj(e).code,a=isNaN(t)?3e3:t<1e3?1e3:+t,s=t=>{4===r||6===r?n.js(t,0).json(e):t.innerHTML=e},l=t=>{0===n.$web?n.class(t).add("pc"):n.font_em&&n.class(t).add("em"),n.class(t).add("show"),null!==n.toast_timer?(clearTimeout(n.toast_timer),c(t)):c(t),t.onclick=(t=>{let o=e;4!==r&&6!==r||(o=JSON.stringify(e)),n.ctrl().c("",o),n.log("copy success",1).log(o,0).log("",3),n.stopBubble(t)})},c=e=>{n.toast_timer=setTimeout(()=>{n.class(e).remove("show"),clearTimeout(n.toast_timer),n.toast_timer=null},a)};if(i)s(i),l(i);else{let e=n._div("div",o);s(e),n.js("body").appendChild(e),l(e)}}stopBubble(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0}stopDefault(e){return e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1,!1}delay(e,t){e=this.copy(Object.assign({timeout:5,name:"delay",type:"get",item:""},e||{}));let n=this.options.prefix+"-delay-"+e.name,o=Date.now(),i=this.$local.get(n)||{};"set"===e.type?(i.item=e.item,i.time=o,this.$local.set(n,i),t&&t({code:0,data:i.item})):!i.time||+i.time-6e4*e.timeout>o?(this.$local.clear(n),t&&t({code:1,data:i})):t&&t({code:0,data:i.item})}prompt(e,t,n){let o=this,i=o.options.prefix+"_prompt";if(e=e||"请输入",n=n||e,!o.$.id(i)){let n=o._div("div",i);n.setAttribute("id",i),n.innerHTML='<p data-head></p><div data-main><input type="text" class="m_inp small"></div><div data-foot><button class="m_btn small" data-close>取消</button><button class="m_btn small" data-submit>确定</button></div>',document.body.appendChild(n),o.js("#"+i+" [data-submit]").click(()=>{let n=o.js("#"+i).find("input").value;""!==n?(t&&t(n),r(),o.js("#"+i).find("input").value=""):o.toast(e)}),o.js("#"+i+" [data-close]").click(()=>{r()})}let r=e=>{o.js("#"+i)[e?"addClass":"removeClass"]("show")};setTimeout(()=>{r(!0)},200),o.js("#"+i+" [data-head]").html(n);let a=o.js("#"+i).find("input");a.setAttribute("placeholder",e),a.focus(),a.onkeydown=function(e){13===e.keyCode&&o.js("#"+i+" [data-submit]").click()}}title(e){this.js("title").html(e||"title")}_init(e){let t=this;t.$model=t._model(),t.$fixed=t._fixed(),t.$web=t.platform(),t.$local=t.local(),t.$session=t.session(),t.route().destroy(),t.$route=t.route(),t.$lazy=t.lazy(),t.$ctrl=t.ctrl(),t.$alg=t.algorithm(),t.$config=t._config(),t.$cookie=t.cookie(),t.$cache=t.cache(),t.$save=t.status(),t.$obj=((e,n)=>{let o=t._is_obj(e);return n?o.code:o}),t.const("__DEMO__","http://148.70.132.221:2020/base/"),t.const("__DEMO_API__",t.__DEMO__+"api/"),t.const("__TIME__","2021-05-13 18:00:00"),t.const("__DOC__",t.__DEMO__+"#/doc"),t.$plug=t.plugIn(),t.$plug.init(),t.font_em=!1,delete t.$plug.init,e(t.refresh(1))}_fixed(){var e=this;return{bgc(t,n){if(n=n||"body",3===e._is_obj(n).code&&(n=e.$.dom(n)),6===e._is_obj(t).code){var o="";for(var i in t)o+=`${i}:${t[i]};`}else t=t.replace("background:",""),o="background:"+t;if(n){var r=e.options.prefix+"_fixed";e.$.dom("."+r)&&e.js("."+r).remove();var a=e._div("div",r);a.setAttribute("style",o),n.appendChild(a),a=null}},image(t,n){if(n=n||"body",3===e._is_obj(n).code&&(n=e.$.dom(n)),n){var o=e.options.prefix+"_fixed";e.$.dom("."+o)&&e.remove("."+o);var i=e._div("div",o);i.setAttribute("style","background:url('"+t+"') no-repeat 0 0 transparent scroll;background-size:100% 100%"),n.appendChild(i),i=null}},gray(t){let n="css-lazy-gray";if(t)try{e.js('style[id="'+n+'"]').remove()}catch(e){}else e.cssLazy(n).text("html{filter:grayscale(1);}")}}}_model(){var e=this;return{success(t,n){e.alert(t,1,{title:n})},error(t,n){e.alert(t,0,{title:n})},warning(t,n){e.alert(t,2,{title:n})},model(t,n,o,i){var r=arguments.length;i=void 0===i?3:i,e.alert(n,i,{title:t,sty:"model",timeout:0},function(e){r>2&&(e.time=Date.now(),o(e))})},popup(t,n,o){e.alert(t,3,{sty:"model",timeout:0,screen:!!o},function(t){3e3===t.code?e.js(t.box,0).addClass("popup"):n&&n(t)})},info(t,n,o){o=o||0,n=void 0===n?1:n,e.alert(t,n,{timeout:o})}}}_timers(e,t,n=1,o){var i=this;if(null!==i[e])return n&&(clearTimeout(i[e]),i[e]=null),!1;t(0),i[e]=setTimeout(function(){clearTimeout(i[e]),i[e]=null,t(1)},o||500)}_storage(e){function t(){var t=window[e].getItem(r)||"{}";try{t=JSON.parse(t)}catch(e){t={}}return t}function n(t){return t?(window[e].setItem(r,JSON.stringify(t)),t):0}function o(e,t){var n=s._is_obj(a[e]).code;return n>6||5===n?t:a[e]}function i(){a=t()}var r=(this.options.name+"-local-"+this.version.replace(/\./g,"")).toUpperCase(),a=t(),s=this;return{all:function(){return i(),a},get:function(e,t=""){return i(),o(e,t)},set:function(e,t){return e||(e=s.options.prefix+"-null"),i(),a[e]=t,n(a)},clear:function(e){return i(),4===s._is_obj(e).code&&e.length?e.forEach(function(e){a[e]=null,delete a[e]}):(a[e]=null,delete a[e]),n(a)},reset:function(){return n({})}}}_style(e,t){if(6===this._is_obj(t).code)for(var n in t)e.style[n]=t[n]}_config(){function e(e){return 7===n._is_obj(o[e]).code}function t(e){return 3===n._is_obj(e).code}let n=this,o=n.$local.get("config",{});return{delete:function(t){return e(t)?0:(delete o[t],n.$local.set("config",o),1)},add:function(i,r){return t(i)&&e(i)?(o[i]=r,n.$local.set("config",o),1):0},edit:function(i,r){return t(i)&&!e(i)?(o[i]=r,n.$local.set("config",o),1):0},select:function(n){return e(n)?t(n)?"":o:o[n]},switch(e,t,o){let i=n._config()[e];return"switch"!==e&&i?i(t,o):0}}}_is_obj(e){var t=0,n="";switch(Object.prototype.toString.call(e)){case"[object Number]":t=1,n="number";break;case"[object Boolean]":t=2,n="boolean";break;case"[object String]":t=3,n="string";break;case"[object Array]":t=4,n="array";break;case"[object Function]":t=5,n="function";break;case"[object Object]":t=6,n="object";break;case"[object Undefined]":t=7,n="undefined";break;case"[object Null]":t=8,n="null"}return{code:t,type:n}}_div(e,t,n){var o=document.createElement(e||"div"),i=this._is_obj(n).code;return 7!==i&&(4!==i&&6!==i||(n=JSON.stringify(n)),o.appendChild(document.createTextNode(n))),i=null,o.setAttribute("class",t||""),o}}(function(){if(!window.demo)window.demo=new Demo})();