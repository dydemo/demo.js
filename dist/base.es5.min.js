"use strict";function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _classCallCheck(e,t){if(!_instanceof(e,t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Demo=function(){function e(t,n){_classCallCheck(this,e),this.options=Object.assign({prefix:"demo",theme:"light",name:"demo",ajax:!0,scroll:!0,api:"",ajaxCookie:!1,debugger:!1,log:!0,plugins:[],ajaxTimeout:8e3,ajaxUploadTimeout:2e4},t||{}),this.const("version","1.0.80"),this.$={dom:function(e){return e?document.querySelector(e):null},all:function(e){if(!e)return[];var t=document.querySelectorAll(e);return t.length>0?Array.from(t):[]},id:function(e){return e?document.getElementById(e):null},name:function(e){if(!e)return[];var t=document.getElementsByName(e);return t.length>0?Array.from(t):[]},tag:function(e){if(!e)return[];var t=document.getElementsByTagName(e);return t.length>0?Array.from(t):[]}},this._init(function(e){n&&n(e)})}return _createClass(e,[{key:"js",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e,o=this;return t&&(n=this.$.dom(e)),n?{dom:function(){return n},html:function(e){if(!arguments.length)return n.innerHTML;var t=o._is_obj(e).code;4!==t&&6!==t||(e=JSON.stringify(e)),n.innerHTML=e},text:function(e){if(!arguments.length)return n.innerText;n.innerText=e},brother:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?n.parentNode.querySelector(e):n},addClass:function(e){if(4===o._is_obj(e).code)return e.forEach(function(e){n.classList.add(e)}),1;n.classList.add(e)},removeClass:function(e){var t=n.className;if(4===o._is_obj(e).code)return e.forEach(function(o){t.indexOf(o)>=0&&n.classList.remove(e)}),1;t.indexOf(e)>=0&&n.classList.remove(e)},toggleClass:function(e){var t=function(t){n.className.indexOf(t)>=0?n.classList.remove(e):n.classList.add(e)};if(4===o._is_obj(e).code)return e.forEach(function(e){t(e)}),1;t(e)},append:function(e){if(!e)return 0;n.innerHTML+=e},appendChild:function(e){if(!e)return 0;n.appendChild(e)},remove:function(){n.parentNode.removeChild(n)},style:function(e,t){var i="";if(6===o._is_obj(e).code)for(var r in e)i+="".concat(r,":").concat(e[r],";"),t&&(n.style[r]=e[r]);else t=!1,i=e;t||n.setAttribute("style",i)},attr:function(e,t){if(6===o._is_obj(e).code)return Object.keys(e).forEach(function(t){n.setAttribute("data-"+t,e[t])}),!0;if(4==o._is_obj(e).code){var i={};return e.forEach(function(e){i[e]=n.getAttribute("data-"+e)||""}),i}if(!(arguments.length>1))return n.getAttribute(e);n.setAttribute(e,t)},click:function(e,t){arguments.length>0?n.onclick=function(n){var i=this;t>0&&!isNaN(t)&&(i.setAttribute("disabled","true"),setTimeout(function(){i.removeAttribute("disabled")},1e3*t)),o.focus(i),e(i,n),n.preventDefault(),o.stopBubble(n)}:n.click()},json:function(e){e=e||{},n.innerHTML=o.showJson(e)},width:function(e){if(!arguments.length)return n.clientWidth;n.style.width=isNaN(e)?e:e+"px"},height:function(e){if(!arguments.length)return n.clientHeight;n.style.height=isNaN(e)?e:e+"px"},square:function(e,t){if(!e)return{w:n.clientWidth,h:n.clientHeight};t||(t=e),o.js(n,0).width(e),o.js(n,0).height(t)},val:function(e){if(!arguments.length)return n.value;n.value=e},input:function(e){arguments.length&&(n.oninput=function(t){e(this,t)})},keydown:function(e){arguments.length&&(n.onkeydown=function(t){t=t||window.event;var o={event:t,code:t.keyCode,value:this.value,key:t.key,dom:n};e(o,this)})},find:function(e){var t=function(e){var t=[];return e.forEach(function(e){t.push({name:e.replace(/[.|#]/,""),dom:Array.from(n.querySelectorAll(e))})}),t};return 4===o._is_obj(e).code?t(e):arguments.length>1?t([e])[0].dom:n.querySelector(e)},video:function(e){for(var t in e=Object.assign({"x5-video-player-type":"h5","x5-video-player-fullscreen":"false"},e||{}),e)n.setAttribute(t,e[t])},index:function(){var e=0;do{e++}while(n=n.previousElementSibling);return e},offset:function(){var e=n.getBoundingClientRect(),t=document.body;return{top:e.top+t.scrollTop,left:e.left+t.scrollLeft,self:{top:e.top,left:e.left}}},replaceVal:function(e){e=e||/[^\u4e00-\u9fa5]/g;var t=function(t){var n=t.value;t.value=n.replace(new RegExp(e),"")};n.onfocus=function(e){t(e.target)},n.onkeyup=function(e){t(e.target)},n.onblur=function(e){t(e.target)}},child:function(e){return Array.from(e?n.querySelectorAll(e):n.children)},bgc:function(e){var t=o.js(n,0).child("[data-background-list]");return t.length&&(e=e||"green|#18bc9c",t.forEach(function(t){var n=t.getAttribute("data-bgc")||e;n=n.split("|"),1===n.length&&(n[1]=n[0]),t.style.background=o.algorithm().gradients(1*(n[2]||90),n[0],n[1]||"")})),t},show:function(){var e=n.getAttribute("data-fade")||"hide";if("hide"===e){var t=0;n.style.display="",n.setAttribute("data-fade","show");var o=function e(){n.style.opacity=t>1?1:t,t+=Math.random()/10,t<1.001&&setTimeout(function(){e()},50)};o()}return n},hide:function(){var e=n.getAttribute("data-fade")||"show";if("show"===e){var t=1,o=function e(){n.style.opacity=t<0?0:t,t-=Math.random()/10,t>-.001?setTimeout(function(){e()},50):(n.style.display="none",n.setAttribute("data-fade","hide"))};o()}return n},toggle:function(){var e=n.getAttribute("data-fade")||"";return o.js(n,0)["show"===e?"hide":"show"]()},file:function(e,t){t=t||{};var i="file-"+o.rand(1e4,99999),r=demo._div("input","m_inp"),a=demo._div("label"),c=n.innerText;r.setAttribute("type","file"),r.setAttribute("id",i),t.more&&r.setAttribute("multiple",!0);var s="";switch(t.type){case"txt":s="text/plain";break;case"other":s=t.accept||"";break;default:s="image/png,image/gif,image/jpg,image/jpeg"}r.setAttribute("accept",s),a.setAttribute("for",i),a.setAttribute("style","display:block"),n.innerHTML="",n.appendChild(r),n.appendChild(a),a.innerHTML=c||"Upload",o.$.id(i)&&(o.$.id(i).onchange=function(){var t={files:this.files,file:this.files[0],time:o.timeout(),id:i,el:n};t.file&&e&&e(t)})},scrollbar:function(){n.clientHeight>n.parentNode.clientHeight&&n.parentNode.classList.add(o.options.prefix+"_scrollbar")}}:{}}},{key:"loading",value:function(e){var t=Object.assign({theme:this.options.theme,dom:"body"},e||{}),n=this,o=n.options.prefix+"_loading",i=n.$.dom("."+o);if(i&&"body"===t.dom)return i.className=o+(""===t.theme?"":" "+t.theme),!1;var r=document.createElement("div");return r.setAttribute("class",o+(""===t.theme?"":" "+t.theme)),t.id&&r.setAttribute("id",n.options.prefix+"-"+t.id),"body"===t.dom?document.body.appendChild(r):(r.setAttribute("style","position:absolute"),n.$.dom(t.dom).appendChild(r)),r}},{key:"alert",value:function(e,t,n,o){var i=Object.assign({title:"",timeout:2e3,screen:0,sty:"alert",btnSuccessText:"确定",btnErrorText:"取消",btnSuccessStyle:"",btnErrorStyle:""},n||{});t=t||0;var r=this,a=null,c=arguments.length>3;i.screen&&(a=r.loading({theme:r.options.theme+" model",id:"loading-"+r.rand(1e3,9999)}));var s=function(e,t){var n=arguments.length;e&&(e.classList.add("hidden"),setTimeout(function(){e&&(r.remove(e),e=null),a&&(r.remove(a),a=null),n>1&&t(),c&&o({code:1,type:"all",status:"remove",options:i.data||{}})},200))};if(t>99){var u=r.js("body").find("[id^='"+r.options.prefix+"-alert-']"),l=r.js("body").find('[id^="'+r.options.prefix+'-loading-"]');return u&&(l&&(a=l),s(u)),l=null,u=null,0}var f=r.options.prefix+"_model."+i.sty,d=r.$.dom("."+f);if(d)return s(d,function(){d=null,r.alert(e,t,n)}),!1;var h=document.createElement("div"),m=["error","success","warning","default"];t=t>=m.length?m.length-1:t,h.setAttribute("class",f.replace("."," ")+" hidden "+m[t]),h.setAttribute("id",r.options.prefix+"-alert-"+r.rand(1e3,9999)),"object"===r._is_obj(e).type&&(e=JSON.stringify(e));var p="",v="_"+r.rand(1e3,9999)+"-";i.title&&(p+='<h3 class="title">'+i.title+"</h3>"),p+='<i class="close"></i>',p+='<p class="msg">'+(void 0===e?"":e)+"</p>","alert"!==i.sty&&(p+='<div class="btn">',p+='<button class="m_btn '+i.btnSuccessStyle+'" id="'+v+'s">'+i.btnSuccessText+"</button>",p+='<button class="m_btn '+i.btnErrorStyle+'" id="'+v+'e">'+i.btnErrorText+"</button>",p+="</div>"),h.innerHTML=p,document.body.appendChild(h);var g=h.querySelector(".close"),y=h.querySelector("#"+v+"s"),b=h.querySelector("#"+v+"e");"alert"===i.sty&&c&&o({code:1,type:"alert",status:"create",options:i.data||{}}),g&&(g.onclick=function(e){s(h),r.stopBubble(e)}),c&&(o({code:3e3,box:h}),y&&r.js(y,0).click(function(){o({btn:"success",t:y,code:1,box:h,options:i.data||{}}),s(h)}),b&&r.js(b,0).click(function(){o({btn:"error",t:b,code:0,box:h,options:i.data||{}}),s(h)})),setTimeout(function(){h.classList.remove("hidden")},50),i.timeout>500&&r._timers("alert_timer",function(e){e&&s(h)},0,i.timeout)}},{key:"rand",value:function(e,t){return e*=1,1===arguments.length?(e=e>9?9:e<1?1:e,t=1*("1e"+e)-1,e=1*("1e"+(e-1)),Math.floor(Math.random()*(t-e+1)+e)):!t&&arguments.length>1?Math.floor(Math.random()*e):(t*=1,Math.floor(Math.random()*(t-e+1)+e))}},{key:"remove",value:function(e){return e&&e.parentNode&&(e.parentNode.removeChild(e),e=null),1}},{key:"timeout",value:function(e,t,n){function o(e){return"星期"+["日","一","二","三","四","五","六"][e]}function i(e){return e<10?"0"+e:e}function r(e,t,n){return n?e.y+t+e.m:e.y+t+e.m+t+e.d}function a(e,t,n){return n?e.h+t+e.i:e.h+t+e.i+t+e.s}function c(e,t){return e.m+t+e.d}e&&!isNaN(e)||(e=Date.now()),e=parseInt(e),n=n||"/",(e+"").length>10&&(e=Math.floor(e/1e3));var s=new Date(1e3*e),u=s.getDay(),l={y:s.getFullYear(),m:s.getMonth()+1,d:s.getDate(),h:s.getHours(),i:s.getMinutes(),s:s.getSeconds(),ms:s.getMilliseconds(),default:e,w:o(u),week:u};u=null,s=null,e=null,l.m=i(l.m),l.d=i(l.d),l.h=i(l.h),l.i=i(l.i),l.s=i(l.s);var f="";switch(t){case"alls":f=r(l,n)+" "+a(l,":");break;case"ymd":f=r(l,n);break;case"md":f=c(l,n);break;case"his":f=a(l,n);break;case"array":f=[l.y,l.m,l.d,l.h,l.i,l.s,l.ms];break;case"object":f=l;break;case"zero":f=new Date(r(l,"/")+" 00:00:00").getTime();break;case"day":f=l.week;break;case"rotate":f={s:6*l.s,i:6*(l.i+l.s/60),h:30*(l.h%12+l.i/60)};break;default:f=r(l,n)+" "+a(l,":",1)}return f}},{key:"local",value:function(){return this._storage("localStorage")}},{key:"session",value:function(){return this._storage("sessionStorage")}},{key:"getUrl",value:function(e){if(void 0===e)var t=decodeURI(location.search);else t="?"+e.split("?")[1];var n=new Object;if(-1!=t.indexOf("?"))for(var o=t.substr(1),i=o.split("&"),r=0;r<i.length;r++)n[i[r].split("=")[0]]=decodeURI(i[r].split("=")[1]||"");return n}},{key:"getUrlParam",value:function(e,t){var n=window.location.search.substring(1);arguments.length>1&&(n=t.split("?")[1]);for(var o=decodeURI(n),i=o.split("&"),r=0;r<i.length;r++){var a=i[r].split("=");if(a[0]==e)return a[1]}return null}},{key:"scroll",value:function(e,t){if(!this.$scroll)return!1;var n=new this.$scroll(e,Object.assign({scrollX:!1,scrollY:!0,bounce:!0,click:!0,mouseWheel:!0,probeType:1,scrollbar:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|DIV|P)$/}},t||{}));return n}},{key:"click",value:function(e,t){var n=this;if(3===n._is_obj(e).code&&(e=n.js(e).dom()),!(arguments.length>1))return e.click();if(e.length>=1)for(var o=function(){var o="data-tab-click-index";e[i].setAttribute(o,i),e[i].onclick=function(e){n.focus(this),t({index:1*this.getAttribute(o),e:e,dom:this}),n.stopBubble(e)}},i=0;i<e.length;i++)o();else e.onclick=function(e){n.focus(this),t({index:0,e:e,dom:this}),n.stopBubble(e)}}},{key:"class",value:function(e){3===this._is_obj(e).code&&(e=this.js(e).dom());var t=[];if(e.length>=1)for(var n=0;n<e.length;n++)t.push(e[n]);else t=[e];return{add:function(e){if(""===e||!e)return!1;t.forEach(function(t){t&&t.className.indexOf(e)<0&&t.classList.add(e)})},remove:function(e){if(""===e||!e)return!1;t.forEach(function(t){t&&t.className.indexOf(e)>=0&&t.classList.remove(e)})},name:function(e){t.forEach(function(t){t&&(t.className=e||"")})}}}},{key:"ajax",value:function(e){var t=this;if(!window.Promise)return{};var n=function(e){var n="";return 6===t._is_obj(e).code?(Object.keys(e).forEach(function(t){n+=t+"="+e[t]+"&"}),n=n.substr(0,n.length-1)):n=e,n};e=e||"";var o=function(n,o,i,r){return t.copy(Object.assign({url:t.options.api+e,method:n,timeout:o||t.options.ajaxTimeout,headers:i,withCredentials:t.options.ajaxCookie},r))};return{get:function(e,n,i,r){var a=t.copy(r||{});"json"===i&&(a["Content-Type"]="application/json"),6===t._is_obj(i).code&&(a=i);var c=arguments.length>1;t.$axios(o("get","",a,{params:e})).then(function(e){200===e.status&&c&&n(e.data)}).catch(function(e){c&&(e.response?n({code:0,data:e.response,err:e.response.data}):n({code:0,data:e,err:e.message}))})},post:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0,a=arguments.length>1,c=t.copy(r||{});if("json"===i)c["Content-Type"]="application/json";else if("object"===_typeof(e)){var s="";for(var u in e)s+=u+"="+e[u]+"&";e=s.substring(0,s.length-1)}6===t._is_obj(i).code&&(c=i),t.$axios(o("post","",c,{data:e})).then(function(e){200===e.status&&a&&n(e.data)}).catch(function(e){a&&(e.response?n({code:0,data:e.response,err:e.response.data}):n({code:0,data:e,err:e.message}))})},upload:function(n,o,i){var r=arguments.length>1,a=new FormData;if(6===t._is_obj(n).code)for(var c in n)a.append(c,n[c]);else a=n;var s=t.copy(Object.assign({"Content-Type":"multipart/form-data;boundary="+Date.now()},i||{}));t.$axios({url:t.options.api+e,method:"post",timeout:t.options.ajaxUploadTimeout,headers:s,withCredentials:t.options.ajaxCookie,data:a,onUploadProgress:function(e){var t=parseInt(e.loaded/e.total*100)/100;o({code:2,type:"progress",progress:t})}}).then(function(e){200===e.status&&r&&o(e.data)}).catch(function(e){r&&(e.response?o({code:0,data:e.response,err:e.response.data}):o({code:0,data:e,err:e.message}))})},other:function(e,n,i,r,a){var c=t.copy(a||{});if("json"===r)c["Content-Type"]="application/json";else if("object"===_typeof(n)){var s="";for(var u in n)s+=u+"="+n[u]+"&";n=s.substring(0,s.length-1)}6===t._is_obj(r).code&&(c=r);var l=arguments.length>1;t.$axios(o(e||"post","",c,{data:n})).then(function(e){200===e.status&&l&&i(e.data)}).catch(function(e){l&&(e.response?i({code:0,data:e.response,err:e.response.data}):i({code:0,data:e,err:e.message}))})},plain:function(o,i,r){var a=n(o),c=((r?"":t.options.api)+e).split("?")[0]+(a?"?"+a:""),s=new XMLHttpRequest;s.open("GET",c,!0),s.onreadystatechange=function(){(4==s.readyState&&200==s.status||304==s.status)&&i.call(this,s.responseText)},s.send()},cipher:function(o,i,r){var a=new XMLHttpRequest;a.open("POST",(r?"":t.options.api)+e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4!=a.readyState||200!=a.status&&304!=a.status||i.call(this,a.responseText)},a.send(n(o))}}}},{key:"jsonp",value:function(e,t,n){function o(){return(Math.floor(1e5*Math.random())*Date.now()).toString(16)}function i(e,t){e=e.replace(/=/g,"");var n=[];switch(t.constructor){case String:case Number:case Boolean:n.push(encodeURIComponent(e)+"="+encodeURIComponent(t));break;case Array:t.forEach(function(t){n=n.concat(i(e+"[]=",t))});break;case Object:Object.keys(t).forEach(function(o){var r=t[o];n=n.concat(i(e+"["+o+"]",r))})}return n}function r(e){var t=[];return e.forEach(function(e){"string"==typeof e?t.push(e):t=t.concat(r(e))}),t}return t=t||{},n=n||this.jsonp_timeout,new Promise(function(a,c){function s(e){u(),clearTimeout(m),c({status:400,statusText:"Bad Request"})}function u(){v.removeEventListener("error",s)}if("string"!=typeof e)throw new Error('[jsonp] Type of param "url" is not string.');var l=t.callbackQuery||"callback",f=t.callbackName||"jsonp_"+o();t[l]=f,delete t.callbackQuery,delete t.callbackName;var d=[];Object.keys(t).forEach(function(e){d=d.concat(i(e,t[e]))});var h=r(d).join("&"),m=null;"number"==typeof n&&(m=setTimeout(function(){u(),p.removeChild(v),delete window[f],c({statusText:"Request Timeout",status:408})},n)),window[f]=function(e){clearTimeout(m),u(),p.removeChild(v),a(e),delete window[f]};var p=document.querySelector("head"),v=document.createElement("script");v.addEventListener("error",s),v.src=e+(/\?/.test(e)?"&":"?")+h,p.appendChild(v)})}},{key:"platform",value:function(){var e=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);if(e){var t=window.navigator.userAgent,n=(window.navigator.appVersion,t.indexOf("Android")>-1||t.indexOf("Linux")>-1),o=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(n)return 1;if(o)return 2}var i=document.body.clientWidth;return i<750?1:0}},{key:"touch",value:function(e,t){function n(n){if(n.preventDefault(),"touchstart"==n.type){var d=n.touches[0];o=Math.floor(d.pageX),i=Math.floor(d.pageY)}else if("touchmove"==n.type){d=n.touches[0];Math.floor(d.pageX),Math.floor(d.pageY)}else if("touchend"==n.type||"touchcancel"==n.type){r=Math.floor(n.changedTouches[0].pageX),a=Math.floor(n.changedTouches[0].pageY),c=r-o,s=a-i,u=180*Math.atan2(s,c)/Math.PI;var h={};Math.abs(c)<=1||Math.abs(s)<=1?h={code:0,text:"点击",dire:"click"}:u<45&&u>=-45?h={code:2,text:"右",dire:"right"}:u<135&&u>=45?h={code:3,text:"下",dire:"down"}:u<=180&&u>=135||u>=-180&&u<-135?h={code:4,text:"左",dire:"left"}:u<=-45&&u>=-135&&(h={code:1,text:"上",dire:"up"}),l=Object.assign(l,h),l.target=e,f>0&&t(l)}}"string"==typeof e&&(e=this.$.dom(e));var o,i,r,a,c,s,u,l={view:["pc","android","iphone"][this.$web],code:-1},f=arguments.length;if(!e||!this.$web)return f>1&&t(l),!1;e.addEventListener("touchstart",n,!1),e.addEventListener("touchmove",n,!1),e.addEventListener("touchend",n,!1)}},{key:"showJson",value:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),e=e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="#ff9b26";return/^"/.test(e)?t=/:$/.test(e)?"#ff4c2f":"#67e66e":/true|false/.test(e)?t="#414fff":/null/.test(e)&&(t="#999"),'<span style="color:'+t+'">'+e+"</span>"})}},{key:"resize",value:function(e,t,n){e=this.$.dom(e)||document.body;var o=arguments.length>1,i={w:e.clientWidth,h:e.clientHeight},r=this;e.onresize=function(){r._timers("resize_timer",function(n){if(n){var r={w:e.clientWidth,h:e.clientHeight};r.h!==i.h&&r.w!==i.w?r.dire="auto":r.w!==i.w?r.dire="width":r.dire="height",o&&t(r)}},0,n||800)}}},{key:"eval",value:function(e,t){if(!t){var n="(function(){"+e+"})()";return this.fn(n)}var o=document.createElement("script");o.type="text/javascript",o.text=e,document.getElementsByTagName("head")[0].appendChild(o),document.head.removeChild(document.head.lastChild),o=null}},{key:"fn",value:function(e){var t=new Function("return "+e)();return t}},{key:"frame",value:function(e,t){function n(){s=null,u=null,r=null,l=null,f=null,d=null,h=null}e=Object.assign({dom:"body",type:"frame",theme:"shadow_right",title:"Title",header:!0,close:!0,scroll:!1,style:{},move:!1,moveDom:"",id:"frame-"+this.rand(1e3,9999)},e);var o=arguments.length>1,i=function(e,t,n){return{err:e,by:t,code:n||0}},r=i("dom is null","frame-dom"),a=this.$.dom(e.dom);if(!a)return o&&t(r),r;e.theme=e.theme?e.theme+(e.header?"":" auto"):e.header?"":"auto",e.style["z-index"]||(e.style["z-index"]=Math.ceil((Date.now()-new Date(this.timeout("","y/m/d")).getTime())/1e3));var c="";switch(c+='<div class="'.concat(this.options.prefix,"_frame").concat(e.theme?" "+e.theme:"",' hidden" data-frame id="').concat(e.id,'">'),e.header?(c+='<header class="frame_header"><b>'.concat(e.title,"</b>"),e.close&&(c+='<span class="close" data-frame-close>X</span>'),c+="</header>"):e.close&&(c+='<span class="close" data-frame-close>X</span>'),c+='<div class="frame_main" id="'.concat(e.id,'-main">'),e.type){case"frame":c+='<iframe src="'.concat(e.src,'" frameborder="0"></iframe>');break;case"template":c+='<div class="content" data-frame-content>'.concat(e.template,"</div>");break;default:c+='<div class="content" data-frame-content></div>'}if(c+="</div>",e.foot&&(c+='<div class="frame_foot" id="'.concat(e.id,'-foot"></div>')),c+="</div>","frame"===e.type&&!e.src)return r=i("frame src is null","frame-src"),o&&t(r),r;if("template"===e.type&&!e.template)return r=i("frame template is null","frame-template"),o&&t(r),r;a.innerHTML=c,c=null,r=i("frame create end","frame-create",1),o&&t(r);var s=a.querySelector("[data-frame]"),u=a.querySelector("[data-frame-close]"),l=a.querySelector("[data-frame-content]"),f=null,d=null,h=null;if(e.foot&&(d=a.querySelector(".frame_foot"),l.style["padding-bottom"]=d.clientHeight+"px"),e.header&&(h=a.querySelector(".frame_header")),e.style){var m="";for(var p in e.style)p&&(m+="".concat(p,":").concat(e.style[p],";"));m&&s.setAttribute("style",m)}var v=this;if(s)return u&&(u.onclick=function(e){s.classList.add("hidden"),setTimeout(function(){v.remove(s),r=i("frame is delete","frame-delete",1),o&&t(r),n()},1e3),v.stopBubble(e)}),e.scroll&&l&&(f=v.scroll("#"+e.id+"-main"),r=i("frame scroll is create success","frame-scroll",1),o&&t(r)),e.move&&v.move(s,function(t){t.code?v.js(s,0).style(Object.assign({left:t.left,top:t.top,margin:"0",bottom:"auto",right:"auto",transition:"all 0s"},e.style)):s.style.transition="all .8s"},e.moveDom),r=i("frame all success","frame-all-"+e.type,1),r.dom=s,r.doms={scroll:f,close:u,content:l,header:h,footer:d,main:v.$.id(e.id+"-main")},o&&t(r),setTimeout(function(){s.classList.remove("hidden")},50),r;r=i("frame dom is null","frame-dom-null"),o&&t(r),n()}},{key:"location",value:function(e,t,n){function o(){if(!window.open)return a.alert("window.open is null"),0;var t=null;try{t=window.open("_blank"),t.location=e}catch(e){a.alert("浏览器禁用 window.open")}return t}function i(){return e===window.location.href?(window.location.reload(),!1):"open"===t.target?(o(e),!1):(window.location.href=e,!0)}var r=arguments.length>2,a=this;if(!e)return!1;if(t=Object.assign({time:0,target:""},t),t.time<1)i();else if(r)var c=1*t.time,s=setInterval(function(){if(c<=0)return clearInterval(s),s=null,i(),!1;r&&n(c),c--},1e3)}},{key:"tree",value:function(e,t,n){t=t||"id",n=n||"by";var o=[];if(!Array.isArray(e))return o;e.forEach(function(e){delete e.children});var i={};return e.forEach(function(e){i[e[t]]=e}),e.forEach(function(e){var t=i[e[n]];t?(t.children||(t.children=[])).push(e):o.push(e)}),o}},{key:"focus",value:function(e){return 3===this._is_obj(e).code&&(e=this.$.dom(e)),e.blur?e.blur():this.$.dom("body").focus(),e}},{key:"script",value:function(e,t,n){if(!e)return!1;var o=document.createElement("script");o.type="text/javascript",arguments.length>2?o.text=n:(o.async=!0,o.src=e),arguments.length>1&&(o.onload=t);var i=document.getElementsByTagName("script")[0];return i.parentNode.insertBefore(o,i),o=null,i=null,!0}},{key:"hover",value:function(e,t,n){var o=arguments.length>1,i=arguments.length>2;if(3===this._is_obj(e).code&&(e=this.$.all(e)),!o)return e;if(e.length>=1)for(var r=0;r<e.length;r++)e[r].setAttribute("data-tab",r),e[r].onmouseenter=function(e){t({index:1*this.getAttribute("data-tab"),e:e,dom:this,type:"enter"})},e[r].onmousemove=function(e){t({index:1*this.getAttribute("data-tab"),e:e,dom:this,type:"move"})},i&&(e[r].onmouseleave=function(e){n({index:1*this.getAttribute("data-tab"),e:e,dom:this,type:"leave"})});else e.onmouseenter=function(e){t({index:0,e:e,dom:this})},i&&(e.onmouseleave=function(e){n({index:0,e:e,dom:this})})}},{key:"tab",value:function(e,t,n){t=Object.assign({index:0,event:"click",list:"[data-tab-list]",nav:"[data-tab]"},t);var o=this;3===o._is_obj(e).code&&(e=o.$.dom(e));var i=Array.from(e.querySelectorAll(t.nav));i.length&&(o.class(i).name(""),i.forEach(function(e,t){e&&!o.js(e,0).attr("data-index")&&o.js(e,0).attr("data-index",t)}),"hover"===t.event&&o.hover(i,function(e){"enter"===e.type&&e.dom.click()}),o.click(i,function(e){var r=e.dom,a=o.js(r,0).attr("data-index");if(void 0===a&&(a=t.index),o.class(i).name(""),o.js(r,0).addClass("active"),o.focus(r),n&&n({index:1*a,that:r}),t.list){var c=o.$.all(t.list);c&&c.length&&(o.class(c).name(""),o.js(c[1*a],0).addClass("show"))}return""}),setTimeout(function(){t.index<i.length&&i[1*t.index].click()},200))}},{key:"move",value:function(e,t,n){if(n&&3===this._is_obj(n).code&&(n=this.$.dom(n)),3===this._is_obj(e).code&&(e=this.$.dom(e)),!e)return null;var o=n?n.clientWidth:window.innerWidth,i=n?n.clientHeight:window.innerHeight;e.onmousedown=function(n){var r=n||window.event,a=r.clientX-e.offsetLeft,c=r.clientY-e.offsetTop;void 0!==e.setCapture&&e.setCapture();var s=0,u=0;document.onmousemove=function(n){var r=n||window.event,l=r.clientX-a,f=r.clientY-c;l=l>o-e.offsetWidth?o-e.offsetWidth:l<0?0:l,f=f>i-e.offsetHeight?i-e.offsetHeight:f<0?0:f,s=l,u=f,t&&t({left:l+"px",top:f+"px",code:1})},document.onmouseup=function(){this.onmousemove=null,this.onmouseup=null,void 0!==e.releaseCapture&&e.releaseCapture(),t&&t({left:s,top:u,code:0}),s=null,u=null}}}},{key:"array",value:function(e){var t=this;return e.length&&4===t._is_obj(e).code?{rand:function(){var n=t.copy(e);return n.sort(function(){return Math.random()-.5})},agg:function(t){var n={};return t?(e.forEach(function(e){var o=e[t];void 0!==o&&""!==o&&(n[o]?n[o].push(e):n[o]=[e])}),n):n},unique:function(t){if(arguments.length){var n=new Map;return e.filter(function(e){return!n.has(e[t])&&n.set(e[t],1)})}for(var o=[],i=0;i<e.length;i++)-1===o.indexOf(e[i])&&o.push(e[i]);return o},max:function(){return Math.max.apply(null,e)},min:function(){return Math.min.apply(null,e)},sort:function(t){return{reverse:function(){return t?e.sort(function(e,n){return n[t].localeCompare(e[t])}):e.sort(function(e,t){return e-t})},sort:function(){return t?e.sort(function(e,n){return e[t].localeCompare(n[t])}):e.sort(function(e,t){return t-e})}}},sum:function(t,n){return t=t||0,n=n||0,e.reduce(function(e,t){e+="",t+="";var o="0";e.indexOf(".")>=0&&(o=e),t.indexOf(".")>=0&&(o=t),e.indexOf(".")>=0&&t.indexOf(".")>=0&&(o=e.length>t.length?e:t);var i=0;o.indexOf(".")>=0&&(i=o.length-o.indexOf(".")-1,i=1*("1e"+i),e*=i,t*=i),e*=1,t*=1,i=i<1?1:i;var r=(e+t)/i;switch(n){case 1:r=(e-t)/i;break;case 2:r=e*t/i;break;case 3:r=e/t;break;case 4:r=e/i%(t/i)}return o=null,i=null,r})+1*t},chunk:function(t,n){t=t||1,n=n||[];var o=e;if(t<=0)return n;for(;o.length;)n.push(o.splice(0,t));return n},obj:function(t,n){var o={};return e.forEach(function(e){void 0!==e[t]&&(o[e[t]]=e[n])}),o}}:{}}},{key:"copy",value:function(e){return""===e||null==e||NaN===e?"":JSON.parse(JSON.stringify(e))}},{key:"font",value:function(e,t){e=e||1920;var n=window.innerWidth*(100/e);t&&(n=t),document.documentElement.style.fontSize=n+"px",this.font_em=!0}},{key:"cssLazy",value:function(e){e=e||"css-lazy";var t=document.head.children,n=!1;if(t.length)for(var o=0;o<t.length;o++)t[o].id===e&&(n=!0);return{link:function(t){if(!t)return 0;if(!n){var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("id",e),o.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(o),o=null}},text:function(t){if(!t)return 0;if(!n){var o=document.createElement("style");o.setAttribute("type","text/css"),o.setAttribute("id",e);try{o.appendChild(document.createTextNode(t))}catch(e){style.styleSheet.cssText=t}document.getElementsByTagName("head")[0].appendChild(o),o=null}}}}},{key:"hash",value:function(e,t,n){function o(){if(i.is_hash)return 0;var o=setTimeout(function(){clearTimeout(o),o=null,i.hash(function(t){e(t)},t,n)},200)}t=0===t?0:t||"",n=n||"";var i=this,r=window.location.hash;if(n)try{r=i.eval("return "+n)}catch(t){n="",r="",e({code:0,data:t+""})}r!=t&&(t=r,e({code:1,data:t})),o()}},{key:"refresh",value:function(e){var t=this;t.loading_timer=null,t.alert_timer=null,t.resize_timer=null,t.timer_timer=null,t.jsonp_timer=null,t.down_timer=null,t.toast_timer=null,t.jsonp_timeout=8e3,t.is_hash=!1,t.is_cache=0;var n=t.$config.select("api");return n&&(t.options.api=n),t.options.scroll&&window.BScroll&&(t.$scroll=window.BScroll),t.options.ajax&&window.axios&&(t.$axios=window.axios),console.log("%c 欢迎使用！当前版本：%c"+t.version+"。%c 更新时间："+t.__TIME__,"color:tomato","color:green","color:orange"),t.options.debugger&&(console.log("%c 禁止调试！","color:orange"),setInterval(function(){var e=Date.now();return e},100)),e||console.log("%c 重置成功","color:#99cc33"),{option:t.options,scroll:t.$scroll||"",ajax:t.$axios||"",ver:t.version}}},{key:"route",value:function(){function e(e,t,n,o){return{path:e,title:n||"",id:t||1,by:o||-1}}function t(e){r.js("title").html(e)}function n(e,n){var o=r.$routeConfig.now;o.path?(window.location.hash=o.path,t(o.title),i(function(t){e&&e(t)})):n&&n()}function o(e){if(e<=0)return{};var t=r.$routeConfig.path.filter(function(t){return t.id===e});return t.length?t[0]:{}}function i(e){var t=r.$routeConfig.now,n={lazy:t.path.replace(/\//g,"_"),params:t.params.join("&"),path:t.path,back:{},id:t.id,title:t.title,code:1};n.back=o(n.by),n.params=r.getUrl("?"+n.params);var i=r.$.all('script[src*="'+r.$routeConfig.prefix+'"]');if(i.length)for(var a=0;a<i.length;a++)r.remove(i[a]);r.script(r.$routeConfig.prefix+n.lazy+r.$routeConfig.suffix),r.$routeConfig.now=n,e(n),n=null}var r=this;return{create:function(e,t,n){if(4===r._is_obj(e).code&&e.length>0){var o=e.filter(function(e){return""!==e.path});return r.$routeConfig.path=r.array(o).unique("path"),r.$route.config(),t&&t(),1}return n&&n(),0},init:function(e){n(function(t){e&&e(t)},function(){r.$route.push(window.location.hash||"/")})},push:function(e,n){var o=e.substr(1);o=o||"index",o=o.split("/");var a=o.filter(function(e){return e.indexOf("=")<0&&e}).join("/"),c=r.$routeConfig.path.filter(function(e){return e.path===a});if(!c.length)return c=null,n?n({code:0,err:"错误路由"}):demo.alert("错误路由"),0;c=c[0],window.location.hash=c.path,t(c.title);var s=[];o=o.join("/").replace(a,"").split("/"),o.length>1&&(s=o.splice(1)),c.params=s,r.$routeConfig.now=c,c=null,i(function(e){n&&n(e)})},back:function(e){var t=(r.$routeConfig.now||{}).back||{};r.$routeConfig.now=t,n(function(t){e&&e(t)},function(){window.history.go(-1)}),t=null},array:function(t){if(4===r._is_obj(t).code&&t.length>0){var n=t.map(function(t){return e(t[0],t[1],t[2],t[3])});return n}return[]},title:function(e){t(e)},reset:function(e,t,n){r.$route.create(e||[]),r.$route.config(t||{}),n&&n()},destroy:function(){r.$routeConfig={path:[],now:{},prefix:"",suffix:""}},config:function(e){e=e||{},r.$routeConfig.prefix=e.prefix||"./lazy/",r.$routeConfig.suffix=e.suffix||".base.js?v="+Date.now()}}}},{key:"lazy",value:function(){var e=this;return{page:function(t,n,o){3===e._is_obj(t).code&&(t=e.js(t).dom()),e.js(t,0).html(""),n=Object.assign({vue:!0,id:"lazy-"+Date.now(),class:"app_view",html:"html",style:"",link:"",suffix:".base.css?v="+Date.now(),prefix:""},n);var i=e._div("div",n.class);i.setAttribute("id",n.id),n.vue&&i.setAttribute("v-clock",""),i.innerHTML=n.html,n.style&&e.cssLazy("css-text-"+n.id).text(n.style),n.link&&(4===e._is_obj(n.link).code?n.link.length&&n.link.forEach(function(t,o){e.cssLazy("css-link-"+n.id+"-"+o).link(n.prefix+t.replace(/\.css/,"")+n.suffix)}):e.cssLazy("css-link-"+n.id).link(n.prefix+n.link.replace(/\.css/,"")+n.suffix)),t.appendChild(i),o&&o()},image:function(t){t=t||"img";for(var n=e.$.all(t),o=n.length,i=document.documentElement.clientHeight,r=document.documentElement.scrollTop||document.body.scrollTop,a=0;a<o;a++){var c=n[a].offsetTop;if(c<i+r){var s=n[a].dataset.src;n[a].src=s}}},scroll:function(e){
var t=document.documentElement,n=t.clientHeight,o=t.scrollTop,i=t.scrollHeight;n+o>=i&&e&&e()},bulk:function(t,n,o,i,r,a,c){return r=r||"li",a=a||"",window.requestAnimationFrame&&document.createDocumentFragment?arguments.length<4||5!==e._is_obj(arguments[3]).code?"传入正确参数":void setTimeout(function(){function s(){for(var t=document.createDocumentFragment(),n=0;n<f;n++){d++;var o=e._div(r,a),c=i(d,m,h);c&&(o.innerHTML=c,t.appendChild(o)),o.setAttribute("data-bulk-id",d)}p.appendChild(t),m+=1,u()}function u(){if(m<h){if(m+1===h){var e=l%f;f=e>0?e:f}window.requestAnimationFrame(s)}else c&&c(Array.from(p.querySelectorAll("[data-bulk-id]")))}var l=t||100,f=n||20,d=0,h=Math.ceil(l/f),m=0,p=o;3===e._is_obj(o).code&&(p=e.$.dom(o)),u()},0):"不支持"}}}},{key:"debounce",value:function(e,t){var n=null;return function(){var o=arguments,i=this;null!==n&&clearTimeout(n),n=setTimeout(function(){e.apply(i,o)},t)}}},{key:"throttle",value:function(e,t){var n=Date.now();return function(){var o=this,i=arguments,r=Date.now();r-n>=t&&(e.apply(o,i),n=Date.now())}}},{key:"access",value:function(e,t,n){var o="接入成功";return this[e]?(o="该方法已存在",n&&n({c:!1,m:o}),o):(this[e]=t,n&&n({c:!0,m:o}),o)}},{key:"ctrl",value:function(){var e=this,t="position: fixed;left: -100vw;top: -100vh;z-index: -1000";return{c:function(n,o){var i=o,r=document.execCommand("copy");if(!r)return e.alert("不支持"),0;if(n)try{3===e._is_obj(n).code&&(n=e.$.dom(n)),i=n.getAttribute("data-copy")||""}catch(e){i=""}var a=e._div("textarea"),c="copy-"+Date.now()+"-"+e.rand(6);return a.value=i||"copy",a.setAttribute("id",c),a.setAttribute("style",t),e.$.dom("body").appendChild(a),a.select(),document.execCommand("copy"),setTimeout(function(){e.remove(a)},300),1},r:function(t,n,o){function i(){l&&(clearTimeout(l),l=null)}if(3===e._is_obj(t).code&&(t=e.$.dom(t)),n=Object.assign({item:[]},n),!n.item.length)return t.oncontextmenu=function(){return o&&o({type:"right"}),!1},1;var r=e._div("div",e.options.prefix+"_right"),a=n.item.length>6?"scroll":"";n.id=n.id||"right-menu-"+Date.now()+"-"+e.rand(6),r.setAttribute("id",n.id);var c='<i class="close fa fa-close"></i><i class="before fa fa-hand-o-up"></i><div class="tab '+a+'"><ul>';n.item.forEach(function(e,t){c+='<li><span title="'+e.text+'" data-index="'+t+'">'+e.text+"</span></li>"}),c+="</ul></div>",r.innerHTML=c,e.$.dom("body").appendChild(r);var s="#"+n.id,u=null,l=null,f=n.timeout||3e3;f=f<100?100:f,a&&(u=e.scroll(s+" .tab",{})),e.click(s+" .close",function(){i(),e.js(s).style({opacity:0})}),e.click(e.$.all(s+" .tab li span"),function(t){var i=t.dom.getAttribute("data-index"),r={data:e.copy(n.item[1*i]),type:"click",scroll:u,res:t,leave:f};r.data.callback&&delete r.data.callback,n.item[i].callback?n.item[i].callback(r):o&&o(r),e.click(s+" .close"),r=null}),t.oncontextmenu=function(t){return e.js(s).style({left:t.clientX+"px",top:t.clientY+"px"}),!1},e.$.dom(s).oncontextmenu=function(){return!1},e.hover(s,function(){i()},function(){i(),l=setTimeout(function(){e.click(s+" .close")},f)})},d:function(t,n){var o=(3===e._is_obj(t).code?t.split(","):t)||[],i=[];o.length&&(i=o.map(function(e){var t=(e+"").split("-"),n={c:"c"===t[0],s:"s"===t[0]};return n.key=t[1]||t[0],n})),o.indexOf("right")>=0&&(document.oncontextmenu=function(){return!1}),document.onkeydown=function(e){var t=e.key.toLowerCase(),r=i.filter(function(n){return n.key.toLowerCase()===t&&e.ctrlKey===n.c&&e.shiftKey===n.s});if(o.indexOf("f12")>=0&&e.ctrlKey&&e.shiftKey&&"i"===t)return n&&n({key:"f12"}),!1;if(r.length){if(r=r[0],e.ctrlKey===r.c&&t===r.key&&!r.s)return n&&n(r),!1;if(e.shiftKey===r.s&&!r.cal&&t===r.key)return n&&n(r),!1}return!0}},k:function(n,o,i){3===e._is_obj(n).code&&(n=e.$.dom(n));var r="ctrl-k-input-keydown",a=function(e,t,n){return{code:t,key:e,val:n}};e.js(n,0).click(function(n){e.$.id(r)&&e.js("#"+r).remove();var c=e._div("input","m_inp");c.setAttribute("id",r),c.setAttribute("style",t),c.setAttribute("autocomplete","off"),n.appendChild(c),c.focus();var s=[];c.onkeydown=function(e){var t={};if(!e.shiftKey&&!e.ctrlKey){var n=e.keyCode;switch(n){case 38:case 87:case 104:t=a("up",0,n);break;case 39:case 68:case 102:t=a("right",1,n);break;case 40:case 83:case 98:t=a("bottom",2,n);break;case 37:case 65:case 100:t=a("left",3,n);break;default:t=a(e.key,4,n)}}c.value="",i&&(t.event=e,s.push(t.key),t.his=s),o&&o(t),t=null}})}}}},{key:"algorithm",value:function(){var e=this;return{rgb:function(t,n){return t=t||0,n=n||255,"rgb("+e.rand(t,n)+","+e.rand(t,n)+","+e.rand(t,n)+")"},rgba:function(t,n,o){return n=n||0,o=o||255,t=t||.1,"rgba("+e.rand(n,o)+","+e.rand(n,o)+","+e.rand(n,o)+","+t+")"},color:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).substr(-6)},gradients:function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var i=n[0],r=n;return 1===e._is_obj(i).code?r=r.splice(1):i=0,r=r.filter(function(t){return 3===e._is_obj(t).code&&""!==t}),r.length<2&&(r=[e.algorithm().rgb(),e.algorithm().rgb()]),r=r.join(","),"linear-gradient("+i+"deg,"+r+")"}}}},{key:"cookie",value:function(){var e=this,t=function(t){return e.options.prefix+"_"+t},n=function(e){return e?e.replace(t(""),""):""};return{set:function(n,o,i){i=i||"d7";var r=i.substr(0,1),a=i.substr(1);a=isNaN(a)?7:1*a;var c=1e3*("d"===r?86400:"h"===r?3600:1)*a,s=new Date;return s.setTime(s.getTime()+c),7!==e._is_obj(n).code&&7!==e._is_obj(o).code&&(document.cookie=t(n)+"="+escape(o)+";expires="+s.toGMTString()),r=null,a=null,c=null,s=null,!0},get:function(o,i){var r=e.cookie().getter(o);if(i)return r;var a=e._is_obj(r).code;return 6===a?r.key=n(r.key):4===a&&(r=r.filter(function(e){return 0===e.key.indexOf(t(""))}),r=r.map(function(e){return e.key=n(e.key),e})),r},getter:function(n){var o=document.cookie||"";return o=o.split(";"),o.length?(o=o.map(function(e){var t=e.split("=");return{key:t[0].trim(),val:unescape(t[1])}}),o=o.filter(function(e){return""!==e.key}),3===e._is_obj(n).code?(o=o.filter(function(e){return e.key===t(n)}),o[0]||{}):o):[]},del:function(n){var o=new Date;o.setTime(o.getTime()-1);var i=e.cookie().getter(n).val;return null!=i&&(document.cookie=t(n)+"="+escape(i)+";expires="+o.toGMTString()),o=null,i=null,!0},clear:function(){var o=e.cookie().getter();return o.length&&(o=o.filter(function(e){return 0===e.key.indexOf(t(""))}),o.length&&o.forEach(function(t){e.cookie().del(n(t.key))})),o=null,!0}}}},{key:"sizeof",value:function(e,t){var n,o,i,r=0;if(t=t?t.toLowerCase():"","utf-16"===t||"utf16"===t)for(o=0,i=e.length;o<i;o++)n=e.charCodeAt(o),r+=n<=65535?2:4;else for(o=0,i=e.length;o<i;o++)n=e.charCodeAt(o),r+=n<=127?1:n<=2047?2:n<=65535?3:4;return r}},{key:"cache",value:function(){var e=this,t="cache_",n=5033164.8,o=["$session","$local"],i=function(n){return e.options.prefix+"_"+t+n},r=function(t){return e.sizeof(t)<n},a=function(t,n){e[o[e.is_cache]].set(t,n)},c=function(t){var n=e[o[e.is_cache]].get(i(t));return 7!==e._is_obj(n).code&&""!==n&&n};return{set:function(t,n){return n+="",r(n)&&3===e._is_obj(n).code?!1!==c(t)?0:(a(i(t),n),1):0},edit:function(t,n){return n+="",!1===c(t)?0:r(n)&&3===e._is_obj(n).code?(a(i(t),n),1):0},get:function(e){return c(e)},del:function(t){return!1===c(t)?0:(e[o[e.is_cache]].clear(i(t)),1)},name:function(e){return{key:i(e),val:c(e)}},cut:function(t){e.is_cache=1*!!t}}}},{key:"log",value:function(e,t){if(!this.options.log)return e;switch(t){case 1:console.group(e);break;case 2:console.groupCollapsed(e);break;case 3:console.groupEnd();break;case 4:console.warn(e);break;case 5:console.error(e);break;case 6:e=Object.assign({text:"log",sty:"color:orange"},e||{}),console.log("%c "+e.text,e.sty),e=e.text;break;default:console.log(e)}return this}},{key:"status",value:function(){var e=this,t=function(t){return(e.options.prefix+"status"+t).toUpperCase()},n=function(n){return e.$session.get(t(n))||{}},o=function(n,o){e.$session.set(t(n),o)},i=function(t,i,r){var a=n(t);return e._is_obj(r).code<7&&(a[i]=r,o(t,a)),a[i]||""},r=function(e,t){if(a[e])return 0;a[e]=function(n,o){return i(e,n,o)||t}},a={page:function(e,t){return i("page",e,t)||1},status:function(e,t){return i("status",e,t)||{}},code:function(e,t){return i("code",e,t)||400},add:function(e,t){r(e,t||"")}};return a}},{key:"const",value:function(e,t){if(this[e])return!1;try{Object.defineProperty(this,e,{enumerable:!0,value:t,configurable:!1,writable:!1})}catch(e){console.log(e+"")}}},{key:"plugIn",value:function(){var e=this,t=e.options.prefix+"_plugins",n=function(t){e.ajax(e.__DEMO_API__).plain({send:t,type:"plugins"},function(t){var n=JSON.parse(t);n.code&&n.data.forEach(function(t){if(e[t.name]&&e[t.name]())return 1;e.script(t.url,function(){e.access(t.name,e.fn(t.fn),function(e){e.c&&o(t.name)}),e.js("script").remove()})})},!0)},o=function(n){var o=e.$config.select(t)||[];o.indexOf(n)<0&&o.push(n),e.$config.edit(t,o)};return{add:function(o,i,r){var a=e.$config.select(t)||[];4===e._is_obj(o).code?(n(o.join(",")),a=a.concat(o)):(n(o),a=a.concat(o.split(",")));var c=e.array(a).unique();e.$config.edit(t,c);var s=function e(){try{i&&i(c)}catch(t){r&&r(t+""),setTimeout(function(){e()},500)}};s()},del:function(n){var o=e.$config.select(t)||[];4===e._is_obj(n).code?n.forEach(function(e){o=o.filter(function(t){return t!==e})}):o=o.filter(function(e){return e!==n}),e.$config.edit(t,o)},init:function(){var o=e.options.plugins.concat(e.$config.select(t)||[]);e.$config.add(t,o),o.length&&n(o.join(","))}}}},{key:"toast",value:function(e,t){var n=this,o=n.options.prefix+"_toast",i=n.$.dom("."+o),r=n._is_obj(e).code,a=isNaN(t)?3e3:t<1e3?1e3:+t,c=function(t){4===r||6===r?n.js(t,0).json(e):t.innerHTML=e},s=function(t){0===n.$web?n.class(t).add("pc"):n.font_em&&n.class(t).add("em"),n.class(t).add("show"),null!==n.toast_timer?(clearTimeout(n.toast_timer),u(t)):u(t),t.onclick=function(t){var o=e;4!==r&&6!==r||(o=JSON.stringify(e)),n.ctrl().c("",o),n.log("copy success",1).log(o,0).log("",3),n.stopBubble(t)}},u=function(e){n.toast_timer=setTimeout(function(){n.class(e).remove("show"),clearTimeout(n.toast_timer),n.toast_timer=null},a)};if(i)c(i),s(i);else{var l=n._div("div",o);c(l),n.js("body").appendChild(l),s(l)}}},{key:"stopBubble",value:function(e){e&&e.stopPropagation?e.stopPropagation():window.event.cancelBubble=!0}},{key:"stopDefault",value:function(e){return e&&e.preventDefault?e.preventDefault():window.event.returnValue=!1,!1}},{key:"delay",value:function(e,t){e=this.copy(Object.assign({timeout:5,name:"delay",type:"get",item:""},e||{}));var n=this.options.prefix+"-delay-"+e.name,o=Date.now(),i=this.$local.get(n)||{};"set"===e.type?(i.item=e.item,i.time=o,this.$local.set(n,i),t&&t({code:0,data:i.item})):!i.time||+i.time-6e4*e.timeout>o?(this.$local.clear(n),t&&t({code:1,data:i})):t&&t({code:0,data:i.item})}},{key:"prompt",value:function(e,t,n){var o=this,i=o.options.prefix+"_prompt";if(e=e||"请输入",n=n||e,!o.$.id(i)){var r=o._div("div",i);r.setAttribute("id",i),r.innerHTML='<p data-head></p><div data-main><input type="text" class="m_inp small"></div><div data-foot><button class="m_btn small" data-close>取消</button><button class="m_btn small" data-submit>确定</button></div>',document.body.appendChild(r),o.js("#"+i+" [data-submit]").click(function(){var n=o.js("#"+i).find("input").value;""!==n?(t&&t(n),a(),o.js("#"+i).find("input").value=""):o.toast(e)}),o.js("#"+i+" [data-close]").click(function(){a()})}var a=function(e){o.js("#"+i)[e?"addClass":"removeClass"]("show")};setTimeout(function(){a(!0)},200),o.js("#"+i+" [data-head]").html(n);var c=o.js("#"+i).find("input");c.setAttribute("placeholder",e),c.focus(),c.onkeydown=function(e){13===e.keyCode&&o.js("#"+i+" [data-submit]").click()}}},{key:"title",value:function(e){this.js("title").html(e||"title")}},{key:"_init",value:function(e){var t=this;t.$model=t._model(),t.$fixed=t._fixed(),t.$web=t.platform(),t.$local=t.local(),t.$session=t.session(),t.route().destroy(),t.$route=t.route(),t.$lazy=t.lazy(),t.$ctrl=t.ctrl(),t.$alg=t.algorithm(),t.$config=t._config(),t.$cookie=t.cookie(),t.$cache=t.cache(),t.$save=t.status(),t.$obj=function(e,n){var o=t._is_obj(e);return n?o.code:o},t.const("__DEMO__","http://148.70.132.221:2020/base/"),t.const("__DEMO_API__",t.__DEMO__+"api/"),t.const("__TIME__","2021-05-13 18:00:00"),t.const("__DOC__",t.__DEMO__+"#/doc"),t.$plug=t.plugIn(),t.$plug.init(),t.font_em=!1,delete t.$plug.init,e(t.refresh(1))}},{key:"_fixed",value:function(){var e=this;return{bgc:function(t,n){if(n=n||"body",3===e._is_obj(n).code&&(n=e.$.dom(n)),6===e._is_obj(t).code){var o="";for(var i in t)o+="".concat(i,":").concat(t[i],";")}else t=t.replace("background:",""),o="background:"+t;if(n){var r=e.options.prefix+"_fixed";e.$.dom("."+r)&&e.js("."+r).remove();var a=e._div("div",r);a.setAttribute("style",o),n.appendChild(a),a=null}},image:function(t,n){if(n=n||"body",3===e._is_obj(n).code&&(n=e.$.dom(n)),n){var o=e.options.prefix+"_fixed";e.$.dom("."+o)&&e.remove("."+o);var i=e._div("div",o);i.setAttribute("style","background:url('"+t+"') no-repeat 0 0 transparent scroll;background-size:100% 100%"),n.appendChild(i),i=null}},gray:function(t){var n="css-lazy-gray";if(t)try{e.js('style[id="'+n+'"]').remove()}catch(e){}else e.cssLazy(n).text("html{filter:grayscale(1);}")}}}},{key:"_model",value:function(){var e=this;return{success:function(t,n){e.alert(t,1,{title:n})},error:function(t,n){e.alert(t,0,{title:n})},warning:function(t,n){e.alert(t,2,{title:n})},model:function(t,n,o,i){var r=arguments.length;i=void 0===i?3:i,e.alert(n,i,{title:t,sty:"model",timeout:0},function(e){r>2&&(e.time=Date.now(),o(e))})},popup:function(t,n,o){e.alert(t,3,{sty:"model",timeout:0,screen:!!o},function(t){3e3===t.code?e.js(t.box,0).addClass("popup"):n&&n(t)})},info:function(t,n,o){o=o||0,n=void 0===n?1:n,e.alert(t,n,{timeout:o})}}}},{key:"_timers",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,i=this;if(null!==i[e])return n&&(clearTimeout(i[e]),i[e]=null),!1;t(0),i[e]=setTimeout(function(){clearTimeout(i[e]),i[e]=null,t(1)},o||500)}},{key:"_storage",value:function(e){function t(){var t=window[e].getItem(r)||"{}";try{t=JSON.parse(t)}catch(e){t={}}return t}function n(t){return t?(window[e].setItem(r,JSON.stringify(t)),t):0}function o(e,t){var n=c._is_obj(a[e]).code;return n>6||5===n?t:a[e]}function i(){a=t()}var r=(this.options.name+"-local-"+this.version.replace(/\./g,"")).toUpperCase(),a=t(),c=this;return{all:function(){return i(),a},get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return i(),o(e,t)},set:function(e,t){return e||(e=c.options.prefix+"-null"),i(),a[e]=t,n(a)},clear:function(e){return i(),4===c._is_obj(e).code&&e.length?e.forEach(function(e){a[e]=null,delete a[e]}):(a[e]=null,delete a[e]),n(a)},reset:function(){return n({})}}}},{key:"_style",value:function(e,t){if(6===this._is_obj(t).code)for(var n in t)e.style[n]=t[n]}},{key:"_config",value:function(){function e(e){return 7===n._is_obj(o[e]).code}function t(e){return 3===n._is_obj(e).code}var n=this,o=n.$local.get("config",{});return{delete:function(t){return e(t)?0:(delete o[t],n.$local.set("config",o),1)},add:function(i,r){return t(i)&&e(i)?(o[i]=r,n.$local.set("config",o),1):0},edit:function(i,r){return t(i)&&!e(i)?(o[i]=r,n.$local.set("config",o),1):0},select:function(n){return e(n)?t(n)?"":o:o[n]},switch:function(e,t,o){var i=n._config()[e];return"switch"!==e&&i?i(t,o):0}}}},{key:"_is_obj",value:function(e){var t=0,n="";switch(Object.prototype.toString.call(e)){case"[object Number]":t=1,n="number";break;case"[object Boolean]":t=2,n="boolean";break;case"[object String]":t=3,n="string";break;case"[object Array]":t=4,n="array";break;case"[object Function]":t=5,n="function";break;case"[object Object]":t=6,n="object";break;case"[object Undefined]":t=7,n="undefined";break;case"[object Null]":t=8,n="null"}return{code:t,type:n}}},{key:"_div",value:function(e,t,n){var o=document.createElement(e||"div"),i=this._is_obj(n).code;return 7!==i&&(4!==i&&6!==i||(n=JSON.stringify(n)),o.appendChild(document.createTextNode(n))),i=null,o.setAttribute("class",t||""),o}}]),e}();(function(){if(!window.demo)window.demo=new Demo})();